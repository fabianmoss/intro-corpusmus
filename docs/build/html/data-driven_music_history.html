<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
      <title>Data-Driven Music History</title>
    
      <link rel="stylesheet" href="_static/pygments.css">
      <link rel="stylesheet" href="_static/theme.css">
      <link rel="stylesheet" href="_static/sphinx_press_theme.css">
      
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>

      <!-- sphinx script_files -->
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

      
      <script src="_static/theme-vendors.js"></script>
      <script src="_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" /> 
  </head>

  <body>
    <div id="app" class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="index.html" class="home-link">
    
      <span class="site-name">Introduction to Musical Corpus Studies</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="index.html#introduction-to-musical-corpus-studies">Content</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="1_orga.html" class="reference internal ">Organization</a>

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
    <li>Data-Driven Music History</li>
  </ul>
  

  <ul class="page-nav">
</ul>
  
</div>
<hr>
          <div class="content" role="main">
            
  <div class="section" id="data-driven-music-history">
<h1>Data-Driven Music History<a class="headerlink" href="#data-driven-music-history" title="Permalink to this headline">¶</a></h1>
<p>Traditionally, musicology has been divided into historical and
systematic research agendas, encompassing qualitative-hermeneutic and
quantitative-empirical methodologies, respectively. Innovations in the
emerging and rapidly growing field of musical corpus studies question
this fundamental divide and address, for instance, inherently historical
questions with quantitative methods, fueled by the creation of ever
larger and more appropriate datasets.</p>
<p>This chapter first introduces some methodological and epistemological
issues regarding empirical approaches to music history. It then presents
a hands-on exercise on a case study. Finally, it invites critical
discussion about the implications and relevance of the results for other
subfields such as music psychology. In doing so, the workshop simulates
(nearly) the entire life cycle of a research project, from an initial
idea via selecting appropriate operationalisations and measures up to
choosing suitable visualisations to communicate the results, e.g. in a
research article or a blog post. At each point, participants will be
invited to critically reflect the decisions taken. Along the way, more
general methods for data analysis (e.g. data transformation, clustering,
dimensionality reduction, and plotting) will be introduced. This is
expected to benefit participants in a vast number of future projects.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> <span class="c1"># for working with tabular data</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># for plotting</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;fivethirtyeight&quot;</span><span class="p">)</span> <span class="c1"># select specific plotting style</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span><span class="p">;</span> <span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="s2">&quot;talk&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<div class="section" id="research-questions">
<h2>Research Questions<a class="headerlink" href="#research-questions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>General: How can we study historical changes quantitatively?</p></li>
<li><p>Specific: What can we say about the history of tonality based on a
dataset of musical pieces?</p></li>
</ul>
</div>
<div class="section" id="a-bit-of-theory">
<h2>A bit of theory<a class="headerlink" href="#a-bit-of-theory" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">note_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;FCGDAEB&quot;</span><span class="p">)</span> <span class="c1"># diatonic note names in fifths ordering</span>
<span class="n">note_names</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">accidentals</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;##&quot;</span><span class="p">]</span> <span class="c1"># up to two accidentals is suffient here</span>
<span class="n">accidentals</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="s1">&#39;##&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lof</span> <span class="o">=</span> <span class="p">[</span> <span class="n">n</span> <span class="o">+</span> <span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">accidentals</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">note_names</span> <span class="p">]</span> <span class="c1"># lof = &quot;Line of Fifths&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lof</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;Fbb&#39;</span><span class="p">,</span> <span class="s1">&#39;Cbb&#39;</span><span class="p">,</span> <span class="s1">&#39;Gbb&#39;</span><span class="p">,</span> <span class="s1">&#39;Dbb&#39;</span><span class="p">,</span> <span class="s1">&#39;Abb&#39;</span><span class="p">,</span> <span class="s1">&#39;Ebb&#39;</span><span class="p">,</span> <span class="s1">&#39;Bbb&#39;</span><span class="p">,</span> <span class="s1">&#39;Fb&#39;</span><span class="p">,</span> <span class="s1">&#39;Cb&#39;</span><span class="p">,</span> <span class="s1">&#39;Gb&#39;</span><span class="p">,</span> <span class="s1">&#39;Db&#39;</span><span class="p">,</span> <span class="s1">&#39;Ab&#39;</span><span class="p">,</span> <span class="s1">&#39;Eb&#39;</span><span class="p">,</span> <span class="s1">&#39;Bb&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;F#&#39;</span><span class="p">,</span> <span class="s1">&#39;C#&#39;</span><span class="p">,</span> <span class="s1">&#39;G#&#39;</span><span class="p">,</span> <span class="s1">&#39;D#&#39;</span><span class="p">,</span> <span class="s1">&#39;A#&#39;</span><span class="p">,</span> <span class="s1">&#39;E#&#39;</span><span class="p">,</span> <span class="s1">&#39;B#&#39;</span><span class="p">,</span> <span class="s1">&#39;F##&#39;</span><span class="p">,</span> <span class="s1">&#39;C##&#39;</span><span class="p">,</span> <span class="s1">&#39;G##&#39;</span><span class="p">,</span> <span class="s1">&#39;D##&#39;</span><span class="p">,</span> <span class="s1">&#39;A##&#39;</span><span class="p">,</span> <span class="s1">&#39;E##&#39;</span><span class="p">,</span> <span class="s1">&#39;B##&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">lof</span><span class="p">)</span> <span class="c1"># how long is this line-of-fifths segment?</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">35</span>
</pre></div>
</div>
<p>We call the elements on the line of fifths <strong>tonal pitch-classes</strong></p>
</div>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="a-kind-of-large-corpus-tp3c">
<h3>A (kind of) large corpus: TP3C<a class="headerlink" href="#a-kind-of-large-corpus-tp3c" title="Permalink to this headline">¶</a></h3>
<p>Here, we use a dataset that was specifically compiled for this kind of
analysis, the <a class="reference external" href="https://github.com/DCMLab/TP3C">Tonal pitch-class counts corpus
(TP3C)</a> <a class="bibtex reference internal" href="bibliography.html#moss2020b" id="id1">[MNR20]</a>.</p>
<ul class="simple">
<li><p>2,012 pieces</p></li>
<li><p>75 composers</p></li>
<li><p>approx. spans 600 years of music history</p></li>
<li><p>does not contain complete pieces but only counts of tonal
pitch-classes</p></li>
</ul>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> <span class="c1"># to work with tabular data</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/DCMLab/TP3C/master/tp3c.tsv&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>composer</th>
      <th>composer_first</th>
      <th>work_group</th>
      <th>work_catalogue</th>
      <th>opus</th>
      <th>no</th>
      <th>mov</th>
      <th>title</th>
      <th>composition</th>
      <th>publication</th>
      <th>source</th>
      <th>display_year</th>
      <th>Fbb</th>
      <th>Cbb</th>
      <th>Gbb</th>
      <th>Dbb</th>
      <th>Abb</th>
      <th>Ebb</th>
      <th>Bbb</th>
      <th>Fb</th>
      <th>Cb</th>
      <th>Gb</th>
      <th>Db</th>
      <th>Ab</th>
      <th>Eb</th>
      <th>Bb</th>
      <th>F</th>
      <th>C</th>
      <th>G</th>
      <th>D</th>
      <th>A</th>
      <th>E</th>
      <th>B</th>
      <th>F#</th>
      <th>C#</th>
      <th>G#</th>
      <th>D#</th>
      <th>A#</th>
      <th>E#</th>
      <th>B#</th>
      <th>F##</th>
      <th>C##</th>
      <th>G##</th>
      <th>D##</th>
      <th>A##</th>
      <th>E##</th>
      <th>B##</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1311</th>
      <td>Schumann</td>
      <td>Robert</td>
      <td>Dichterliebe</td>
      <td>Op.</td>
      <td>48</td>
      <td>3</td>
      <td>NaN</td>
      <td>Die Rose, die Lilie, die Taube</td>
      <td>1840.0</td>
      <td>NaN</td>
      <td>OSLC</td>
      <td>1840.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>52</td>
      <td>69</td>
      <td>61</td>
      <td>40</td>
      <td>45</td>
      <td>52</td>
      <td>48</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>279</th>
      <td>Alkan</td>
      <td>Charles Valentin</td>
      <td>Esquisses</td>
      <td>Op.</td>
      <td>63</td>
      <td>37</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1861.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1861.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>6</td>
      <td>128</td>
      <td>131</td>
      <td>48</td>
      <td>113</td>
      <td>144</td>
      <td>143</td>
      <td>68</td>
      <td>6</td>
      <td>8</td>
      <td>41</td>
      <td>34</td>
      <td>14</td>
      <td>12</td>
      <td>4</td>
      <td>3</td>
      <td>4</td>
      <td>4</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>61</th>
      <td>Beethoven</td>
      <td>Ludwig van</td>
      <td>Piano Sonatas</td>
      <td>Op.</td>
      <td>22</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>Piano Sonata No. 11</td>
      <td>1800.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1800.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>6</td>
      <td>35</td>
      <td>111</td>
      <td>61</td>
      <td>284</td>
      <td>657</td>
      <td>650</td>
      <td>463</td>
      <td>339</td>
      <td>474</td>
      <td>422</td>
      <td>217</td>
      <td>63</td>
      <td>46</td>
      <td>42</td>
      <td>16</td>
      <td>4</td>
      <td>5</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>208</th>
      <td>Liszt</td>
      <td>Franz</td>
      <td>12 Transcendental Etudes</td>
      <td>S.</td>
      <td>139</td>
      <td>7</td>
      <td>NaN</td>
      <td>Eroica</td>
      <td>1851.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1851.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>15</td>
      <td>129</td>
      <td>148</td>
      <td>225</td>
      <td>297</td>
      <td>376</td>
      <td>393</td>
      <td>296</td>
      <td>225</td>
      <td>163</td>
      <td>156</td>
      <td>130</td>
      <td>137</td>
      <td>113</td>
      <td>88</td>
      <td>56</td>
      <td>42</td>
      <td>45</td>
      <td>15</td>
      <td>32</td>
      <td>6</td>
      <td>5</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1010</th>
      <td>Busnoys</td>
      <td>Antoine</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Mon seul et celé souvenir</td>
      <td>1480.0</td>
      <td>NaN</td>
      <td>ELVIS</td>
      <td>1480.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>12</td>
      <td>58</td>
      <td>55</td>
      <td>29</td>
      <td>84</td>
      <td>59</td>
      <td>55</td>
      <td>13</td>
      <td>1</td>
      <td>6</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>900</th>
      <td>Lang</td>
      <td>Josephine</td>
      <td>Sechs Lieder</td>
      <td>Op.</td>
      <td>25</td>
      <td>3</td>
      <td>NaN</td>
      <td>Barcarole</td>
      <td>NaN</td>
      <td>1860.0</td>
      <td>OSLC</td>
      <td>1860.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>2</td>
      <td>55</td>
      <td>99</td>
      <td>107</td>
      <td>81</td>
      <td>59</td>
      <td>84</td>
      <td>44</td>
      <td>8</td>
      <td>2</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>317</th>
      <td>Beethoven</td>
      <td>Ludwig van</td>
      <td>Piano Sonatas</td>
      <td>Op.</td>
      <td>49</td>
      <td>2</td>
      <td>1.0</td>
      <td>Piano Sonata No. 20</td>
      <td>NaN</td>
      <td>1805.0</td>
      <td>MS</td>
      <td>1805.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>26</td>
      <td>139</td>
      <td>273</td>
      <td>335</td>
      <td>259</td>
      <td>144</td>
      <td>231</td>
      <td>175</td>
      <td>46</td>
      <td>12</td>
      <td>13</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1120</th>
      <td>Reichardt</td>
      <td>Louise</td>
      <td>Zwölf Deutsche und Italiänische Romantische Ge...</td>
      <td>Op.</td>
      <td>NaN</td>
      <td>2</td>
      <td>NaN</td>
      <td>Wenn ich ihn nur habe</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>OSLC</td>
      <td>1802.5</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>10</td>
      <td>40</td>
      <td>39</td>
      <td>21</td>
      <td>18</td>
      <td>22</td>
      <td>16</td>
      <td>9</td>
      <td>1</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1754</th>
      <td>Corelli</td>
      <td>Arcangelo</td>
      <td>12 Trio Sonatas</td>
      <td>Op.</td>
      <td>3</td>
      <td>6</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1689.0</td>
      <td>CCARH</td>
      <td>1689.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>65</td>
      <td>117</td>
      <td>104</td>
      <td>68</td>
      <td>77</td>
      <td>81</td>
      <td>59</td>
      <td>13</td>
      <td>0</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1979</th>
      <td>Mozart</td>
      <td>Wolfgang Amadeus</td>
      <td>Sonaten</td>
      <td>KV</td>
      <td>331</td>
      <td>11</td>
      <td>1.0</td>
      <td>Var. 4</td>
      <td>1783.0</td>
      <td>NaN</td>
      <td>CCARH</td>
      <td>1783.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>44</td>
      <td>108</td>
      <td>119</td>
      <td>66</td>
      <td>18</td>
      <td>86</td>
      <td>37</td>
      <td>4</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">display_year</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hist&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">6</span><span class="p">));</span> <span class="c1"># historical overview</span>
</pre></div>
</div>
<img alt="output_13_0.png" src="output_13_0.png" />
<ul class="simple">
<li><p>it can be seen that there are large gaps and that some historical
periods are underrepresented</p></li>
<li><p>however, it is not so obvious how to fix that</p></li>
<li><p>do we want a uniform distribution over time?</p></li>
<li><p>do we want a “historically accurate” distribution?</p></li>
<li><p>do we want to remove geographical/gender/class/instrument/etc.
biases?</p></li>
<li><p>on one hand, balanced datasets are likely not to reflect historical
realities</p></li>
<li><p>on the other hand, such datasets rather represent the “canon”, that
is a contemporary selection of “valuable” compositions that may
differ greatly from what was considered relevant at the time</p></li>
</ul>
<p>–&gt; There is no unique objective answer to these questions. It is
important to be aware of these limitations and take them into account
when interpreting the results</p>
<p>For this workshop we ignore all the metadata about the pieces (titles,
composer names etc.) but only focus on their tonal material. Therefore,
we don’t need all the columns of the table.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tpc_counts</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">lof</span><span class="p">]</span> <span class="c1"># select all rows (&quot;:&quot;) and the lof columns</span>
<span class="n">tpc_counts</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Fbb</th>
      <th>Cbb</th>
      <th>Gbb</th>
      <th>Dbb</th>
      <th>Abb</th>
      <th>Ebb</th>
      <th>Bbb</th>
      <th>Fb</th>
      <th>Cb</th>
      <th>Gb</th>
      <th>Db</th>
      <th>Ab</th>
      <th>Eb</th>
      <th>Bb</th>
      <th>F</th>
      <th>C</th>
      <th>G</th>
      <th>D</th>
      <th>A</th>
      <th>E</th>
      <th>B</th>
      <th>F#</th>
      <th>C#</th>
      <th>G#</th>
      <th>D#</th>
      <th>A#</th>
      <th>E#</th>
      <th>B#</th>
      <th>F##</th>
      <th>C##</th>
      <th>G##</th>
      <th>D##</th>
      <th>A##</th>
      <th>E##</th>
      <th>B##</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1233</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>14</td>
      <td>79</td>
      <td>101</td>
      <td>30</td>
      <td>13</td>
      <td>53</td>
      <td>34</td>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1779</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>32</td>
      <td>56</td>
      <td>21</td>
      <td>33</td>
      <td>61</td>
      <td>66</td>
      <td>37</td>
      <td>3</td>
      <td>3</td>
      <td>13</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>254</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>44</td>
      <td>50</td>
      <td>154</td>
      <td>441</td>
      <td>541</td>
      <td>408</td>
      <td>488</td>
      <td>657</td>
      <td>604</td>
      <td>334</td>
      <td>66</td>
      <td>78</td>
      <td>164</td>
      <td>71</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1704</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>54</td>
      <td>67</td>
      <td>76</td>
      <td>64</td>
      <td>55</td>
      <td>65</td>
      <td>42</td>
      <td>4</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1647</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>51</td>
      <td>71</td>
      <td>61</td>
      <td>53</td>
      <td>70</td>
      <td>99</td>
      <td>70</td>
      <td>29</td>
      <td>16</td>
      <td>32</td>
      <td>14</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>715</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>16</td>
      <td>0</td>
      <td>75</td>
      <td>49</td>
      <td>105</td>
      <td>111</td>
      <td>112</td>
      <td>145</td>
      <td>621</td>
      <td>88</td>
      <td>61</td>
      <td>46</td>
      <td>41</td>
      <td>20</td>
      <td>46</td>
      <td>32</td>
      <td>13</td>
      <td>20</td>
      <td>12</td>
      <td>2</td>
      <td>63</td>
      <td>7</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1672</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>45</td>
      <td>57</td>
      <td>36</td>
      <td>57</td>
      <td>64</td>
      <td>73</td>
      <td>49</td>
      <td>10</td>
      <td>0</td>
      <td>15</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>837</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>14</td>
      <td>21</td>
      <td>16</td>
      <td>15</td>
      <td>18</td>
      <td>12</td>
      <td>11</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>741</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>13</td>
      <td>84</td>
      <td>141</td>
      <td>138</td>
      <td>199</td>
      <td>267</td>
      <td>296</td>
      <td>310</td>
      <td>300</td>
      <td>306</td>
      <td>415</td>
      <td>282</td>
      <td>308</td>
      <td>382</td>
      <td>239</td>
      <td>138</td>
      <td>134</td>
      <td>84</td>
      <td>77</td>
      <td>23</td>
      <td>19</td>
      <td>15</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1595</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>4</td>
      <td>14</td>
      <td>8</td>
      <td>51</td>
      <td>209</td>
      <td>252</td>
      <td>244</td>
      <td>144</td>
      <td>163</td>
      <td>158</td>
      <td>80</td>
      <td>22</td>
      <td>11</td>
      <td>8</td>
      <td>13</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>513</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>14</td>
      <td>37</td>
      <td>214</td>
      <td>228</td>
      <td>85</td>
      <td>253</td>
      <td>322</td>
      <td>271</td>
      <td>173</td>
      <td>104</td>
      <td>47</td>
      <td>90</td>
      <td>71</td>
      <td>14</td>
      <td>5</td>
      <td>0</td>
      <td>11</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1502</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>11</td>
      <td>16</td>
      <td>7</td>
      <td>12</td>
      <td>17</td>
      <td>17</td>
      <td>11</td>
      <td>3</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1121</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>16</td>
      <td>27</td>
      <td>0</td>
      <td>20</td>
      <td>44</td>
      <td>34</td>
      <td>27</td>
      <td>3</td>
      <td>0</td>
      <td>18</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1959</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>36</td>
      <td>38</td>
      <td>49</td>
      <td>33</td>
      <td>32</td>
      <td>28</td>
      <td>19</td>
      <td>8</td>
      <td>8</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>169</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>13</td>
      <td>75</td>
      <td>107</td>
      <td>123</td>
      <td>125</td>
      <td>118</td>
      <td>111</td>
      <td>84</td>
      <td>27</td>
      <td>7</td>
      <td>12</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1777</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>75</td>
      <td>135</td>
      <td>81</td>
      <td>110</td>
      <td>126</td>
      <td>181</td>
      <td>108</td>
      <td>27</td>
      <td>8</td>
      <td>26</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>665</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>24</td>
      <td>100</td>
      <td>28</td>
      <td>99</td>
      <td>311</td>
      <td>289</td>
      <td>121</td>
      <td>410</td>
      <td>395</td>
      <td>814</td>
      <td>386</td>
      <td>179</td>
      <td>533</td>
      <td>225</td>
      <td>121</td>
      <td>66</td>
      <td>149</td>
      <td>53</td>
      <td>3</td>
      <td>10</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>436</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>9</td>
      <td>124</td>
      <td>57</td>
      <td>63</td>
      <td>171</td>
      <td>188</td>
      <td>108</td>
      <td>66</td>
      <td>101</td>
      <td>90</td>
      <td>43</td>
      <td>21</td>
      <td>33</td>
      <td>18</td>
      <td>5</td>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>690</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>20</td>
      <td>25</td>
      <td>7</td>
      <td>25</td>
      <td>47</td>
      <td>45</td>
      <td>27</td>
      <td>0</td>
      <td>0</td>
      <td>14</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1526</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>16</td>
      <td>14</td>
      <td>11</td>
      <td>98</td>
      <td>236</td>
      <td>496</td>
      <td>106</td>
      <td>127</td>
      <td>182</td>
      <td>101</td>
      <td>37</td>
      <td>8</td>
      <td>20</td>
      <td>11</td>
      <td>20</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">piece</span> <span class="o">=</span> <span class="n">tpc_counts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">piece</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;&#39;without theory&#39;&quot;</span><span class="p">)</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">piece</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">piece</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;&#39;with theory&#39;&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/random_piece.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_17_0.png" src="output_17_0.png" />
<p>Let us have an overview of the note counts in these pieces!</p>
<p>If we would just look at the raw counts of the tonal pitch-classe, we
could not learn much from it. Using a theoretical model (the line of
fifths) shows that the notes in pieces are usually come from few
adjacent keys (you don’t say!).</p>
<div class="figure align-default" id="id2">
<img alt="Random piece" src="img/random_piece.png" />
<p class="caption"><span class="caption-text">Random piece</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>We probably have very long pieces (sonatas) and very short pieces
(songs) in the dataset. Since we don’t want length (or the absolute
number of notes in a piece) to have an effect, we rather consider tonal
pitch-class distributions instead counts, by normalizing all pieces to
sum to one.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tpc_dists</span> <span class="o">=</span> <span class="n">tpc_counts</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">tpc_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">tpc_dists</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Fbb</th>
      <th>Cbb</th>
      <th>Gbb</th>
      <th>Dbb</th>
      <th>Abb</th>
      <th>Ebb</th>
      <th>Bbb</th>
      <th>Fb</th>
      <th>Cb</th>
      <th>Gb</th>
      <th>Db</th>
      <th>Ab</th>
      <th>Eb</th>
      <th>Bb</th>
      <th>F</th>
      <th>C</th>
      <th>G</th>
      <th>D</th>
      <th>A</th>
      <th>E</th>
      <th>B</th>
      <th>F#</th>
      <th>C#</th>
      <th>G#</th>
      <th>D#</th>
      <th>A#</th>
      <th>E#</th>
      <th>B#</th>
      <th>F##</th>
      <th>C##</th>
      <th>G##</th>
      <th>D##</th>
      <th>A##</th>
      <th>E##</th>
      <th>B##</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1658</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.011364</td>
      <td>0.034091</td>
      <td>0.034091</td>
      <td>0.090909</td>
      <td>0.113636</td>
      <td>0.090909</td>
      <td>0.068182</td>
      <td>0.102273</td>
      <td>0.056818</td>
      <td>0.125000</td>
      <td>0.136364</td>
      <td>0.045455</td>
      <td>0.034091</td>
      <td>0.056818</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>109</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000668</td>
      <td>0.016700</td>
      <td>0.086172</td>
      <td>0.113560</td>
      <td>0.111556</td>
      <td>0.125585</td>
      <td>0.157649</td>
      <td>0.156981</td>
      <td>0.120240</td>
      <td>0.047428</td>
      <td>0.022044</td>
      <td>0.021376</td>
      <td>0.018036</td>
      <td>0.002004</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>353</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.023077</td>
      <td>0.117692</td>
      <td>0.150769</td>
      <td>0.136154</td>
      <td>0.137692</td>
      <td>0.144615</td>
      <td>0.136154</td>
      <td>0.104615</td>
      <td>0.026154</td>
      <td>0.010000</td>
      <td>0.013077</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>137</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.003731</td>
      <td>0.016169</td>
      <td>0.085821</td>
      <td>0.134328</td>
      <td>0.125622</td>
      <td>0.139303</td>
      <td>0.130597</td>
      <td>0.141791</td>
      <td>0.125622</td>
      <td>0.055970</td>
      <td>0.019900</td>
      <td>0.012438</td>
      <td>0.008706</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>611</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.065393</td>
      <td>0.046289</td>
      <td>0.072006</td>
      <td>0.089640</td>
      <td>0.160911</td>
      <td>0.231447</td>
      <td>0.122704</td>
      <td>0.058046</td>
      <td>0.071271</td>
      <td>0.047024</td>
      <td>0.025716</td>
      <td>0.005143</td>
      <td>0.001470</td>
      <td>0.000000</td>
      <td>0.002204</td>
      <td>0.000000</td>
      <td>0.000735</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1741</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.003036</td>
      <td>0.090081</td>
      <td>0.178138</td>
      <td>0.176113</td>
      <td>0.153846</td>
      <td>0.135628</td>
      <td>0.122470</td>
      <td>0.103239</td>
      <td>0.012146</td>
      <td>0.018219</td>
      <td>0.007085</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>495</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.022403</td>
      <td>0.026477</td>
      <td>0.012220</td>
      <td>0.075356</td>
      <td>0.226069</td>
      <td>0.228106</td>
      <td>0.107943</td>
      <td>0.077393</td>
      <td>0.075356</td>
      <td>0.109980</td>
      <td>0.028513</td>
      <td>0.000000</td>
      <td>0.010183</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>248</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.004561</td>
      <td>0.102623</td>
      <td>0.002281</td>
      <td>0.047891</td>
      <td>0.139111</td>
      <td>0.407070</td>
      <td>0.131129</td>
      <td>0.026226</td>
      <td>0.036488</td>
      <td>0.096921</td>
      <td>0.005701</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1152</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.039175</td>
      <td>0.245361</td>
      <td>0.158763</td>
      <td>0.107216</td>
      <td>0.131959</td>
      <td>0.173196</td>
      <td>0.103093</td>
      <td>0.041237</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1599</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.016138</td>
      <td>0.008646</td>
      <td>0.054179</td>
      <td>0.134294</td>
      <td>0.170605</td>
      <td>0.122767</td>
      <td>0.088761</td>
      <td>0.154467</td>
      <td>0.112968</td>
      <td>0.064553</td>
      <td>0.021326</td>
      <td>0.011527</td>
      <td>0.014409</td>
      <td>0.023055</td>
      <td>0.002305</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>606</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.059524</td>
      <td>0.059524</td>
      <td>0.061905</td>
      <td>0.235714</td>
      <td>0.161905</td>
      <td>0.147619</td>
      <td>0.104762</td>
      <td>0.057143</td>
      <td>0.054762</td>
      <td>0.045238</td>
      <td>0.007143</td>
      <td>0.004762</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>731</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.022831</td>
      <td>0.091324</td>
      <td>0.063927</td>
      <td>0.105023</td>
      <td>0.082192</td>
      <td>0.125571</td>
      <td>0.148402</td>
      <td>0.136986</td>
      <td>0.086758</td>
      <td>0.063927</td>
      <td>0.027397</td>
      <td>0.031963</td>
      <td>0.013699</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>82</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.004723</td>
      <td>0.069658</td>
      <td>0.269185</td>
      <td>0.165289</td>
      <td>0.108619</td>
      <td>0.077922</td>
      <td>0.107438</td>
      <td>0.118064</td>
      <td>0.036600</td>
      <td>0.015348</td>
      <td>0.008264</td>
      <td>0.017710</td>
      <td>0.000000</td>
      <td>0.001181</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>935</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.088496</td>
      <td>0.143363</td>
      <td>0.176991</td>
      <td>0.141593</td>
      <td>0.139823</td>
      <td>0.162832</td>
      <td>0.120354</td>
      <td>0.023009</td>
      <td>0.000000</td>
      <td>0.001770</td>
      <td>0.001770</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>670</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.001664</td>
      <td>0.003177</td>
      <td>0.004993</td>
      <td>0.010743</td>
      <td>0.009684</td>
      <td>0.032531</td>
      <td>0.097140</td>
      <td>0.106219</td>
      <td>0.079437</td>
      <td>0.131185</td>
      <td>0.113330</td>
      <td>0.165229</td>
      <td>0.100620</td>
      <td>0.034196</td>
      <td>0.041610</td>
      <td>0.041459</td>
      <td>0.014223</td>
      <td>0.007263</td>
      <td>0.004388</td>
      <td>0.000605</td>
      <td>0.000000</td>
      <td>0.000303</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>564</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.038182</td>
      <td>0.098182</td>
      <td>0.076364</td>
      <td>0.109091</td>
      <td>0.121818</td>
      <td>0.132727</td>
      <td>0.250909</td>
      <td>0.083636</td>
      <td>0.007273</td>
      <td>0.014545</td>
      <td>0.052727</td>
      <td>0.012727</td>
      <td>0.001818</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>404</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000507</td>
      <td>0.001013</td>
      <td>0.006079</td>
      <td>0.021783</td>
      <td>0.069402</td>
      <td>0.107396</td>
      <td>0.100304</td>
      <td>0.110942</td>
      <td>0.155015</td>
      <td>0.152482</td>
      <td>0.112969</td>
      <td>0.059777</td>
      <td>0.030395</td>
      <td>0.039007</td>
      <td>0.026342</td>
      <td>0.006079</td>
      <td>0.000507</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>341</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.006089</td>
      <td>0.012855</td>
      <td>0.019621</td>
      <td>0.016915</td>
      <td>0.092693</td>
      <td>0.179296</td>
      <td>0.209743</td>
      <td>0.098782</td>
      <td>0.076455</td>
      <td>0.113667</td>
      <td>0.098106</td>
      <td>0.058187</td>
      <td>0.008119</td>
      <td>0.004736</td>
      <td>0.004736</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>371</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.028169</td>
      <td>0.089924</td>
      <td>0.195016</td>
      <td>0.173348</td>
      <td>0.136511</td>
      <td>0.109426</td>
      <td>0.140845</td>
      <td>0.081257</td>
      <td>0.023835</td>
      <td>0.014085</td>
      <td>0.005417</td>
      <td>0.002167</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>53</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000898</td>
      <td>0.007181</td>
      <td>0.026032</td>
      <td>0.073609</td>
      <td>0.101436</td>
      <td>0.095153</td>
      <td>0.147217</td>
      <td>0.164273</td>
      <td>0.151706</td>
      <td>0.114004</td>
      <td>0.033214</td>
      <td>0.033214</td>
      <td>0.038600</td>
      <td>0.012567</td>
      <td>0.000898</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div><p>For further numerical analysis, we extract the data from this table and
assign it to a variable <code class="docutils literal notranslate"><span class="pre">X</span></code>.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract values of table to matrix</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">tpc_dists</span><span class="o">.</span><span class="n">values</span>

<span class="n">X</span><span class="o">.</span><span class="n">shape</span> <span class="c1"># shows (#rows, #columns) of X</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, <code class="docutils literal notranslate"><span class="pre">X</span></code> is a 2012 <span class="math notranslate nohighlight">\(\times\)</span> 35 matrix where the rows represent
the pieces and the columns (also called “features” or “dimensions”)
represent the relative frequency of tonal pitch-classes.</p>
<p>Thinking in 35 dimensions is quite difficult for most people. Without
trying to imagine what this would look like, what can we already say
about this data?</p>
<p>Since each piece is a point in this 35-D space and pieces are
represented as vectors, pieces that have similar tonal pitch-class
distributions must be close in this space (whatever this looks like).</p>
<p>What groups of pieces that cluster together? Maybe pieces of the same
composer are similar to each other? Maybe pieces from a similar time?
Maybe pieces for the same instruments?</p>
<p>If we find clusters, these would still be in 35-D and thus difficult to
interpret. Luckily, there are a range of so-called <em>dimensionality
reduction</em> methods that transform the data into lower-dimensional spaces
so that we actually can look at them.</p>
<p>A very common dimensionality reduction method is <strong>Principal Components
Analysis (PCA)</strong>.</p>
<p>The basic idea of PCA is:</p>
<ul class="simple">
<li><p>find dimensions in the data that maximize the variance in this
direction</p></li>
<li><p>these dimensions have to be orthogonal to each other (mutually
independent)</p></li>
<li><p>these dimensions are called the <em>principal components</em></p></li>
<li><p>each principal component is associated with how much of the data
variance it explains</p></li>
</ul>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># for numerical computations</span>
<span class="kn">import</span> <span class="nn">sklearn</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span> <span class="c1"># for dimensionality reduction</span>

<span class="n">pca</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">decomposition</span><span class="o">.</span><span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span> <span class="c1"># initialize PCA with 35 dimensions</span>
<span class="n">pca</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="c1"># apply it to the data</span>
<span class="n">variance</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span> <span class="c1"># assign explained variance to variable</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">variance</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;relative&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">variance</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;cumulative&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">35</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Principal Components&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Explained variance&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lof</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lof</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># because Pyhon starts counting at 0</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;center right&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/explained_variance.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_30_0.png" src="output_30_0.png" />
<div class="figure align-default" id="id3">
<img alt="explained variance" src="img/explained_variance.png" />
<p class="caption"><span class="caption-text">explained variance</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">variance</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([</span><span class="mf">0.41144591</span><span class="p">,</span> <span class="mf">0.23410347</span><span class="p">,</span> <span class="mf">0.09063507</span><span class="p">,</span> <span class="mf">0.07574242</span><span class="p">,</span> <span class="mf">0.04436989</span><span class="p">])</span>
</pre></div>
</div>
<p>The first principal component explains 41.1% of the variance of the
data, the second explains 23.4% and the third 9%. Together, this amounts
to 73.6%.</p>
<p>Almost three quarters of the variance in the dataset is retained by
reducing the dimensionality from 35 to 3 dimensions (8.6%)! If we reduce
the data to two dimensions, we still can explain <span class="math notranslate nohighlight">\(\approx\)</span> 65% of
the variance.</p>
<p>This is great because it means that we can look at the data in 2 or 3
dimensions without loosing too much information.</p>
</div>
</div>
<div class="section" id="recovering-the-line-of-fifths-from-data">
<h2>Recovering the line of fifths from data<a class="headerlink" href="#recovering-the-line-of-fifths-from-data" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pca3d</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">pca3d</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">X_</span> <span class="o">=</span> <span class="n">pca3d</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">X_</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X_</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">X_</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">X_</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">25</span><span class="p">)</span> <span class="c1"># c=cs,</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;PC 1&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;PC 2&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s2">&quot;PC 3&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/3d_scatter.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_38_0.png" src="output_38_0.png" />
<div class="figure align-default" id="id4">
<img alt="3D Scatterplot" src="img/3d_scatter.png" />
<p class="caption"><span class="caption-text">3D Scatterplot</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Each piece in this plot is represented by a point in 3-D space. But
remember that this location represents ~75% of the information contained
in the full tonal pitch-class distribution. In 35-D space each dimension
corresponded to the relative frequency of a tonal pitch-class in a
piece.</p>
<ul class="simple">
<li><p>What do these three dimensions signify?</p></li>
<li><p>How can we interpret them?</p></li>
</ul>
<p>Fortunately, we can inspect them individually and try to interpret what
we see.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">)):</span>

    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X_</span><span class="p">[:,</span><span class="n">i</span><span class="p">],</span> <span class="n">X_</span><span class="p">[:,</span><span class="n">j</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">25</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PC </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PC </span><span class="si">{</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/3d_dimension_pairs.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_41_0.png" src="output_41_0.png" />
<div class="figure align-default" id="id5">
<img alt="Principal Components" src="img/3d_dimension_pairs.png" />
<p class="caption"><span class="caption-text">Principal Components</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>Clearly, looking at two principal components at a time shows that there
is some latent structure in the data. How can we understand it better?</p>
<p>One way to see whether the pieces are clustered together systematically
be coloring them according to some criterion.</p>
<p>As always, many different options are available. For the present purpose
we will use the most simple summary of the piece: its most frequent note
(which is the <em>mode</em> of its pitch-class distribution in statistical
terms) and call this note its <strong>tonal center</strong>.</p>
<p>This will also allow to map the tonal pitch-classes on the line of
fifths to colors.</p>
<div class="figure align-default" id="id6">
<img alt="Line of fifths coloring" src="img/lof.png" />
<p class="caption"><span class="caption-text">Line of fifths coloring</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tpc_dists</span><span class="p">[</span><span class="s2">&quot;tonal_center&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tpc_dists</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">piece</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">piece</span><span class="p">[</span><span class="n">lof</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">tpc_dists</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Fbb</th>
      <th>Cbb</th>
      <th>Gbb</th>
      <th>Dbb</th>
      <th>Abb</th>
      <th>Ebb</th>
      <th>Bbb</th>
      <th>Fb</th>
      <th>Cb</th>
      <th>Gb</th>
      <th>Db</th>
      <th>Ab</th>
      <th>Eb</th>
      <th>Bb</th>
      <th>F</th>
      <th>C</th>
      <th>G</th>
      <th>D</th>
      <th>A</th>
      <th>E</th>
      <th>B</th>
      <th>F#</th>
      <th>C#</th>
      <th>G#</th>
      <th>D#</th>
      <th>A#</th>
      <th>E#</th>
      <th>B#</th>
      <th>F##</th>
      <th>C##</th>
      <th>G##</th>
      <th>D##</th>
      <th>A##</th>
      <th>E##</th>
      <th>B##</th>
      <th>tonal_center</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>319</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.049020</td>
      <td>0.105392</td>
      <td>0.193627</td>
      <td>0.088235</td>
      <td>0.128676</td>
      <td>0.155637</td>
      <td>0.172794</td>
      <td>0.067402</td>
      <td>0.000000</td>
      <td>0.006127</td>
      <td>0.029412</td>
      <td>0.003676</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>959</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.029730</td>
      <td>0.113514</td>
      <td>0.129730</td>
      <td>0.118919</td>
      <td>0.189189</td>
      <td>0.205405</td>
      <td>0.140541</td>
      <td>0.062162</td>
      <td>0.000000</td>
      <td>0.008108</td>
      <td>0.002703</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>213</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000536</td>
      <td>0.014464</td>
      <td>0.002321</td>
      <td>0.010536</td>
      <td>0.087321</td>
      <td>0.116250</td>
      <td>0.044643</td>
      <td>0.088750</td>
      <td>0.110714</td>
      <td>0.115536</td>
      <td>0.097857</td>
      <td>0.031429</td>
      <td>0.023929</td>
      <td>0.072500</td>
      <td>0.067143</td>
      <td>0.036786</td>
      <td>0.014464</td>
      <td>0.006250</td>
      <td>0.023929</td>
      <td>0.009643</td>
      <td>0.010357</td>
      <td>0.005536</td>
      <td>0.001964</td>
      <td>0.005000</td>
      <td>0.000000</td>
      <td>0.002143</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-5</td>
    </tr>
    <tr>
      <th>914</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.004326</td>
      <td>0.004851</td>
      <td>0.018747</td>
      <td>0.012192</td>
      <td>0.021893</td>
      <td>0.044442</td>
      <td>0.029759</td>
      <td>0.039984</td>
      <td>0.064761</td>
      <td>0.072889</td>
      <td>0.070661</td>
      <td>0.072496</td>
      <td>0.093078</td>
      <td>0.114709</td>
      <td>0.103828</td>
      <td>0.062533</td>
      <td>0.057682</td>
      <td>0.054536</td>
      <td>0.031463</td>
      <td>0.012585</td>
      <td>0.005768</td>
      <td>0.004457</td>
      <td>0.002360</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>6</td>
    </tr>
    <tr>
      <th>127</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.004911</td>
      <td>0.012500</td>
      <td>0.039732</td>
      <td>0.095089</td>
      <td>0.156250</td>
      <td>0.115625</td>
      <td>0.119196</td>
      <td>0.145536</td>
      <td>0.153125</td>
      <td>0.076339</td>
      <td>0.022768</td>
      <td>0.011607</td>
      <td>0.036607</td>
      <td>0.009821</td>
      <td>0.000446</td>
      <td>0.000446</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>711</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.005298</td>
      <td>0.066225</td>
      <td>0.127152</td>
      <td>0.152318</td>
      <td>0.050331</td>
      <td>0.107285</td>
      <td>0.182781</td>
      <td>0.147020</td>
      <td>0.068874</td>
      <td>0.014570</td>
      <td>0.014570</td>
      <td>0.049007</td>
      <td>0.010596</td>
      <td>0.000000</td>
      <td>0.001325</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.002649</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>879</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.135371</td>
      <td>0.139738</td>
      <td>0.135371</td>
      <td>0.165939</td>
      <td>0.170306</td>
      <td>0.135371</td>
      <td>0.117904</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1020</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.016349</td>
      <td>0.138965</td>
      <td>0.070845</td>
      <td>0.076294</td>
      <td>0.237057</td>
      <td>0.209809</td>
      <td>0.147139</td>
      <td>0.057221</td>
      <td>0.002725</td>
      <td>0.035422</td>
      <td>0.008174</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>858</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.008929</td>
      <td>0.125000</td>
      <td>0.178571</td>
      <td>0.133929</td>
      <td>0.125000</td>
      <td>0.178571</td>
      <td>0.125000</td>
      <td>0.125000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>755</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000960</td>
      <td>0.000960</td>
      <td>0.001440</td>
      <td>0.006721</td>
      <td>0.002880</td>
      <td>0.006721</td>
      <td>0.016323</td>
      <td>0.033125</td>
      <td>0.033125</td>
      <td>0.033605</td>
      <td>0.053289</td>
      <td>0.088814</td>
      <td>0.149784</td>
      <td>0.071051</td>
      <td>0.097456</td>
      <td>0.157945</td>
      <td>0.063370</td>
      <td>0.087854</td>
      <td>0.018243</td>
      <td>0.019203</td>
      <td>0.047048</td>
      <td>0.009602</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>0.00048</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>8</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cm</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">Normalize</span>

<span class="c1">#normalize item number values to colormap</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=-</span><span class="mi">15</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># cs = [ cm.seismic(norm(c)) for c in data[&quot;tonal_center&quot;]]</span>
<span class="n">cs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">cm</span><span class="o">.</span><span class="n">seismic</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">tpc_dists</span><span class="p">[</span><span class="s2">&quot;tonal_center&quot;</span><span class="p">]]</span>
</pre></div>
</div>
<div class="figure align-default" id="id7">
<img alt="Dimension pairs" src="img/3d_dimension_pairs.png" />
<p class="caption"><span class="caption-text">Dimension pairs</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">)):</span>

    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X_</span><span class="p">[:,</span><span class="n">i</span><span class="p">],</span> <span class="n">X_</span><span class="p">[:,</span><span class="n">j</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="p">[</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">],</span> <span class="n">edgecolor</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PC </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PC </span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/3d_dimension_pairs_colored.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_49_0.png" src="output_49_0.png" />
<p><img alt="Dimension pairs colored" src="img/3d_dimension_pairs_colored.png" /> <img alt="Line of Fifths" src="img/lof.png" /></p>
</div>
<div class="section" id="historical-development-of-tonality">
<h2>Historical development of tonality<a class="headerlink" href="#historical-development-of-tonality" title="Permalink to this headline">¶</a></h2>
<p>The line of fifths is an important underlying structure for pitch-class
distributions in tonal compositions</p>
<p>But we have treated all pieces in our dataset as synchronic and have not
yet taken their historical location into account.</p>
<p>Remember the tonal pitch-class distribution of an example piece above?</p>
<div class="figure align-default" id="id8">
<img alt="Random piece" src="img/random_piece.png" />
<p class="caption"><span class="caption-text">Random piece</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>Let’s assume the pitch-class content of a piece spreads on the line of
fifths from F to A<span class="math notranslate nohighlight">\(\sharp\)</span>.</p>
<div class="figure align-default" id="id9">
<img alt="Line of fifths" src="img/lof.png" />
<p class="caption"><span class="caption-text">Line of fifths</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>This means, its range on the line of fifths is <span class="math notranslate nohighlight">\(10 - (-1) = 11\)</span>.
The piece covers eleven consecutive fifths on the lof.</p>
<p>We can generalize this calculation and write a function that calculates
the range for each piece in the dataset.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lof_range</span><span class="p">(</span><span class="n">piece</span><span class="p">):</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">piece</span><span class="p">)</span> <span class="k">if</span> <span class="n">v</span><span class="o">!=</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;lof_range&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">lof</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">lof_range</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># create a new column</span>
<span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>composer</th>
      <th>composer_first</th>
      <th>work_group</th>
      <th>work_catalogue</th>
      <th>opus</th>
      <th>no</th>
      <th>mov</th>
      <th>title</th>
      <th>composition</th>
      <th>publication</th>
      <th>source</th>
      <th>display_year</th>
      <th>Fbb</th>
      <th>Cbb</th>
      <th>Gbb</th>
      <th>Dbb</th>
      <th>Abb</th>
      <th>Ebb</th>
      <th>Bbb</th>
      <th>Fb</th>
      <th>Cb</th>
      <th>Gb</th>
      <th>Db</th>
      <th>Ab</th>
      <th>Eb</th>
      <th>Bb</th>
      <th>F</th>
      <th>C</th>
      <th>G</th>
      <th>D</th>
      <th>A</th>
      <th>E</th>
      <th>B</th>
      <th>F#</th>
      <th>C#</th>
      <th>G#</th>
      <th>D#</th>
      <th>A#</th>
      <th>E#</th>
      <th>B#</th>
      <th>F##</th>
      <th>C##</th>
      <th>G##</th>
      <th>D##</th>
      <th>A##</th>
      <th>E##</th>
      <th>B##</th>
      <th>lof_range</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1022</th>
      <td>Victoria</td>
      <td>TomasLuisde</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>O vos omnes</td>
      <td>NaN</td>
      <td>1585.0</td>
      <td>ELVIS</td>
      <td>1585.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>9</td>
      <td>1</td>
      <td>0</td>
      <td>8</td>
      <td>25</td>
      <td>19</td>
      <td>25</td>
      <td>51</td>
      <td>67</td>
      <td>35</td>
      <td>9</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>11</td>
    </tr>
    <tr>
      <th>51</th>
      <td>Bach</td>
      <td>Johann Sebastian</td>
      <td>Wohltemperiertes Klavier II</td>
      <td>BWV</td>
      <td>877</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1740.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1740.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>18</td>
      <td>78</td>
      <td>120</td>
      <td>96</td>
      <td>122</td>
      <td>132</td>
      <td>156</td>
      <td>119</td>
      <td>47</td>
      <td>24</td>
      <td>40</td>
      <td>26</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>13</td>
    </tr>
    <tr>
      <th>941</th>
      <td>Mahler</td>
      <td>Gustav</td>
      <td>Kindertotenlieder</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4</td>
      <td>NaN</td>
      <td>Oft denk' ich sie sind nur ausgegangen</td>
      <td>NaN</td>
      <td>1904.0</td>
      <td>OSLC</td>
      <td>1904.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>12</td>
      <td>0</td>
      <td>5</td>
      <td>53</td>
      <td>75</td>
      <td>66</td>
      <td>96</td>
      <td>106</td>
      <td>245</td>
      <td>65</td>
      <td>54</td>
      <td>51</td>
      <td>54</td>
      <td>30</td>
      <td>12</td>
      <td>4</td>
      <td>22</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>17</td>
    </tr>
    <tr>
      <th>261</th>
      <td>Koželuh</td>
      <td>Leopold</td>
      <td>Piano Sonata</td>
      <td>Op.</td>
      <td>38</td>
      <td>3</td>
      <td>2</td>
      <td>Allegretto</td>
      <td>1793.0</td>
      <td>NaN</td>
      <td>DB</td>
      <td>1793.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>88</td>
      <td>192</td>
      <td>69</td>
      <td>178</td>
      <td>389</td>
      <td>392</td>
      <td>232</td>
      <td>123</td>
      <td>103</td>
      <td>114</td>
      <td>42</td>
      <td>14</td>
      <td>8</td>
      <td>3</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1335</th>
      <td>Schumann</td>
      <td>Robert</td>
      <td>Liederkreis</td>
      <td>Op.</td>
      <td>39</td>
      <td>7</td>
      <td>NaN</td>
      <td>Auf einer Burg</td>
      <td>1840.0</td>
      <td>1842.0</td>
      <td>OSLC</td>
      <td>1840.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>26</td>
      <td>82</td>
      <td>51</td>
      <td>29</td>
      <td>52</td>
      <td>102</td>
      <td>54</td>
      <td>16</td>
      <td>0</td>
      <td>13</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
    </tr>
    <tr>
      <th>1286</th>
      <td>Schubert</td>
      <td>Franz</td>
      <td>Winterreise</td>
      <td>D. 911</td>
      <td>89</td>
      <td>7</td>
      <td>NaN</td>
      <td>Auf dem Flusse</td>
      <td>NaN</td>
      <td>1827.0</td>
      <td>OSLC</td>
      <td>1827.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>5</td>
      <td>0</td>
      <td>40</td>
      <td>88</td>
      <td>44</td>
      <td>111</td>
      <td>173</td>
      <td>287</td>
      <td>178</td>
      <td>70</td>
      <td>84</td>
      <td>142</td>
      <td>91</td>
      <td>15</td>
      <td>0</td>
      <td>7</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>17</td>
    </tr>
    <tr>
      <th>1714</th>
      <td>Grieg</td>
      <td>Edvard</td>
      <td>Lyrical Pieces</td>
      <td>Op.</td>
      <td>12</td>
      <td>8</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1866.0</td>
      <td>1867.0</td>
      <td>DCML</td>
      <td>1866.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>10</td>
      <td>27</td>
      <td>66</td>
      <td>65</td>
      <td>41</td>
      <td>26</td>
      <td>63</td>
      <td>29</td>
      <td>7</td>
      <td>6</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>13</td>
    </tr>
    <tr>
      <th>401</th>
      <td>Bach</td>
      <td>Johann Sebastian</td>
      <td>Wohltemperiertes Klavier I</td>
      <td>BWV</td>
      <td>868</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1722.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1722.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>21</td>
      <td>99</td>
      <td>136</td>
      <td>135</td>
      <td>143</td>
      <td>115</td>
      <td>135</td>
      <td>90</td>
      <td>23</td>
      <td>8</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>11</td>
    </tr>
    <tr>
      <th>857</th>
      <td>Rue</td>
      <td>Pierre de la</td>
      <td>Ave Sanctissima Maria</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Cruxifixus</td>
      <td>1485.0</td>
      <td>NaN</td>
      <td>ELVIS</td>
      <td>1485.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>21</td>
      <td>19</td>
      <td>29</td>
      <td>22</td>
      <td>19</td>
      <td>23</td>
      <td>17</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
    </tr>
    <tr>
      <th>2009</th>
      <td>Joplin</td>
      <td>Scott</td>
      <td>Ragtimes</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Wall Street Rag</td>
      <td>NaN</td>
      <td>1909.0</td>
      <td>CCARH</td>
      <td>1909.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>9</td>
      <td>20</td>
      <td>72</td>
      <td>188</td>
      <td>303</td>
      <td>151</td>
      <td>154</td>
      <td>232</td>
      <td>173</td>
      <td>42</td>
      <td>73</td>
      <td>16</td>
      <td>19</td>
      <td>37</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>16</td>
    </tr>
    <tr>
      <th>1869</th>
      <td>Corelli</td>
      <td>Arcangelo</td>
      <td>12 concerti grossi</td>
      <td>Op.</td>
      <td>6</td>
      <td>10</td>
      <td>4.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1714.0</td>
      <td>CCARH</td>
      <td>1714.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>79</td>
      <td>174</td>
      <td>206</td>
      <td>167</td>
      <td>147</td>
      <td>151</td>
      <td>141</td>
      <td>34</td>
      <td>0</td>
      <td>12</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>9</td>
    </tr>
    <tr>
      <th>1520</th>
      <td>Alkan</td>
      <td>Charles Valentin</td>
      <td>Un Morceau Caractéristique</td>
      <td>Op.</td>
      <td>74</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1840.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1840.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>154</td>
      <td>140</td>
      <td>38</td>
      <td>90</td>
      <td>285</td>
      <td>474</td>
      <td>274</td>
      <td>62</td>
      <td>78</td>
      <td>226</td>
      <td>88</td>
      <td>1</td>
      <td>8</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>741</th>
      <td>Granados</td>
      <td>Enrique</td>
      <td>Goyescas</td>
      <td>Op.</td>
      <td>11</td>
      <td>5</td>
      <td>NaN</td>
      <td>El Amor y la muerte (balada)</td>
      <td>1909.0</td>
      <td>1912.0</td>
      <td>MS</td>
      <td>1909.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>13</td>
      <td>84</td>
      <td>141</td>
      <td>138</td>
      <td>199</td>
      <td>267</td>
      <td>296</td>
      <td>310</td>
      <td>300</td>
      <td>306</td>
      <td>415</td>
      <td>282</td>
      <td>308</td>
      <td>382</td>
      <td>239</td>
      <td>138</td>
      <td>134</td>
      <td>84</td>
      <td>77</td>
      <td>23</td>
      <td>19</td>
      <td>15</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>23</td>
    </tr>
    <tr>
      <th>462</th>
      <td>Bach</td>
      <td>Johann Sebastian</td>
      <td>Inventions and Sinfonias</td>
      <td>BWV</td>
      <td>773</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1723.0</td>
      <td>MS</td>
      <td>1723.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>41</td>
      <td>93</td>
      <td>80</td>
      <td>90</td>
      <td>102</td>
      <td>92</td>
      <td>106</td>
      <td>47</td>
      <td>2</td>
      <td>14</td>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
    </tr>
    <tr>
      <th>1304</th>
      <td>Schumann</td>
      <td>Robert</td>
      <td>Dichterliebe</td>
      <td>Op.</td>
      <td>48</td>
      <td>12</td>
      <td>NaN</td>
      <td>Am leuchtenden Sommermorgen</td>
      <td>1840.0</td>
      <td>NaN</td>
      <td>OSLC</td>
      <td>1840.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>12</td>
      <td>6</td>
      <td>3</td>
      <td>27</td>
      <td>113</td>
      <td>96</td>
      <td>49</td>
      <td>42</td>
      <td>58</td>
      <td>37</td>
      <td>13</td>
      <td>23</td>
      <td>11</td>
      <td>10</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>17</td>
    </tr>
    <tr>
      <th>1689</th>
      <td>Corelli</td>
      <td>Arcangelo</td>
      <td>12 Trio Sonatas</td>
      <td>Op.</td>
      <td>1</td>
      <td>8</td>
      <td>3.0</td>
      <td>Largo</td>
      <td>NaN</td>
      <td>1681.0</td>
      <td>CCARH</td>
      <td>1681.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>39</td>
      <td>55</td>
      <td>44</td>
      <td>39</td>
      <td>88</td>
      <td>90</td>
      <td>66</td>
      <td>7</td>
      <td>0</td>
      <td>13</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>10</td>
    </tr>
    <tr>
      <th>1320</th>
      <td>Schumann</td>
      <td>Robert</td>
      <td>Frauenliebe und Leben</td>
      <td>Op.</td>
      <td>42</td>
      <td>3</td>
      <td>NaN</td>
      <td>Ich kann's nicht fassen, nicht glauben</td>
      <td>1840.0</td>
      <td>NaN</td>
      <td>OSLC</td>
      <td>1840.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>2</td>
      <td>5</td>
      <td>49</td>
      <td>74</td>
      <td>54</td>
      <td>62</td>
      <td>129</td>
      <td>108</td>
      <td>57</td>
      <td>26</td>
      <td>10</td>
      <td>16</td>
      <td>17</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>14</td>
    </tr>
    <tr>
      <th>983</th>
      <td>Dufay</td>
      <td>Guillaume</td>
      <td>Missa l'homme armé</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Kyrie</td>
      <td>1474.0</td>
      <td>NaN</td>
      <td>ELVIS</td>
      <td>1474.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>29</td>
      <td>35</td>
      <td>26</td>
      <td>65</td>
      <td>54</td>
      <td>41</td>
      <td>18</td>
      <td>8</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>8</td>
    </tr>
    <tr>
      <th>1525</th>
      <td>Alkan</td>
      <td>Charles Valentin</td>
      <td>Un Morceau Caractéristique</td>
      <td>Op.</td>
      <td>74</td>
      <td>7</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1840.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1840.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>3</td>
      <td>22</td>
      <td>66</td>
      <td>210</td>
      <td>221</td>
      <td>76</td>
      <td>81</td>
      <td>226</td>
      <td>144</td>
      <td>20</td>
      <td>21</td>
      <td>46</td>
      <td>18</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>14</td>
    </tr>
    <tr>
      <th>1427</th>
      <td>Scriabin</td>
      <td>Alexander</td>
      <td>NaN</td>
      <td>Op.</td>
      <td>9</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Nocturne for the left hand</td>
      <td>1894.0</td>
      <td>NaN</td>
      <td>MS</td>
      <td>1894.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>61</td>
      <td>17</td>
      <td>33</td>
      <td>117</td>
      <td>215</td>
      <td>248</td>
      <td>110</td>
      <td>99</td>
      <td>151</td>
      <td>94</td>
      <td>49</td>
      <td>83</td>
      <td>127</td>
      <td>79</td>
      <td>48</td>
      <td>99</td>
      <td>95</td>
      <td>99</td>
      <td>38</td>
      <td>5</td>
      <td>11</td>
      <td>36</td>
      <td>10</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>27</td>
    </tr>
  </tbody>
</table>
</div><p>This allows us now to take the <code class="docutils literal notranslate"><span class="pre">display_year</span></code> (composition or
publication) and <code class="docutils literal notranslate"><span class="pre">lof_range</span></code> (range on the line of fifths) features to
observe historical changes.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;display_year&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;lof_range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">5</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">35</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;line-of-fifths range&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/hist_scatter.png&quot;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="output_59_0.png" src="output_59_0.png" />
<div class="figure align-default" id="id10">
<img alt="Historical scatterplot" src="img/hist_scatter.png" />
<p class="caption"><span class="caption-text">Historical scatterplot</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>We could try to fit a line to this data to see whether there is a trend
(kinda obvious here).</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;display_year&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lof_range&quot;</span><span class="p">,</span>
    <span class="n">line_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span><span class="s2">&quot;k&quot;</span><span class="p">},</span>
    <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;alpha&quot;</span><span class="p">:</span><span class="o">.</span><span class="mi">5</span><span class="p">},</span>
<span class="c1">#     lowess=True,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/hist_scatter_line.png&quot;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="output_62_0.png" src="output_62_0.png" />
<div class="figure align-default" id="id11">
<img alt="Line Scatter" src="img/hist_scatter_line.png" />
<p class="caption"><span class="caption-text">Line Scatter</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>But actually, this is not the best idea. Why should any historical
process be linear? More complex models might make more sense.</p>
<p>A more versatile technique is <em>Locally Weighted Scatterplot Smoothing</em>
(LOWESS) that locally fits a polynomial. Using this method, we see that
a non-linear process is displayed.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.nonparametric.smoothers_lowess</span> <span class="kn">import</span> <span class="n">lowess</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">display_year</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lof_range</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">lowess</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">l</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">l</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;line-of-fifths range&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/hist_scatter_lowess.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_66_0.png" src="output_66_0.png" />
<div class="figure align-default" id="id12">
<img alt="Scatter Lowess" src="img/hist_scatter_lowess.png" />
<p class="caption"><span class="caption-text">Scatter Lowess</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="if-there-is-time-some-more-advanced-stuff">
<h2>If there is time: some more advanced stuff<a class="headerlink" href="#if-there-is-time-some-more-advanced-stuff" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">B</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">delta</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">10</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">display_year</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lof_range</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">lowess</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span> <span class="n">frac</span><span class="o">=</span><span class="n">delta</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">25</span><span class="p">)</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="n">resampled</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">xx</span> <span class="o">=</span> <span class="n">resampled</span><span class="o">.</span><span class="n">display_year</span>
    <span class="n">yy</span> <span class="o">=</span> <span class="n">resampled</span><span class="o">.</span><span class="n">lof_range</span>
    <span class="n">ll</span> <span class="o">=</span> <span class="n">lowess</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span><span class="n">xx</span><span class="p">,</span> <span class="n">frac</span><span class="o">=</span><span class="n">delta</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ll</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">ll</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">05</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">l</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">l</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>

<span class="c1">## REGIONS</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Rectangle</span>

<span class="n">text_kws</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;rotation&quot;</span> <span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
    <span class="s2">&quot;fontsize&quot;</span> <span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="s2">&quot;bbox&quot;</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span>
    <span class="p">),</span>
    <span class="s2">&quot;horizontalalignment&quot;</span> <span class="p">:</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span>
    <span class="s2">&quot;verticalalignment&quot;</span> <span class="p">:</span> <span class="s2">&quot;center&quot;</span>
<span class="p">}</span>

<span class="n">rect_props</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;width&quot;</span> <span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
    <span class="s2">&quot;zorder&quot;</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;alpha&quot;</span> <span class="p">:</span> <span class="mf">1.</span>
<span class="p">}</span>

<span class="n">stylecolors</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;axes.prop_cycle&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">by_key</span><span class="p">()[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;diatonic&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">text_kws</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mf">6.5</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># dia / chrom.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">((</span><span class="mi">1960</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mf">6.5</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">stylecolors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">**</span><span class="n">rect_props</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">,</span> <span class="s2">&quot;chromatic&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">text_kws</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mf">12.5</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># chr. / enh.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">((</span><span class="mi">1960</span><span class="p">,</span><span class="mf">6.5</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">stylecolors</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">**</span><span class="n">rect_props</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mf">23.5</span><span class="p">,</span> <span class="s2">&quot;enharmonic&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">text_kws</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">((</span><span class="mi">1960</span><span class="p">,</span><span class="mf">12.5</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">stylecolors</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="o">**</span><span class="n">rect_props</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">35</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">1300</span><span class="p">,</span><span class="mi">2000</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;line-of-fifths range&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/final.png&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_69_0.png" src="output_69_0.png" />
<p>Usung bootstrap sampling we achieve an estimation of the local varience
of the data and thus of the diversity in the note usage of the musical
pieces.</p>
<div class="figure align-default" id="id13">
<img alt="Final Result" src="img/final.png" />
<p class="caption"><span class="caption-text">Final Result</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<p>We also can distinguish three regions in terms of line-of-fifth range:
diatonic, chromatic, and enharmonic.</p>
<p>Grouping the data together in these three regions, we see a clear change
from diatonic and chromatic to chromatic and enharmonic pieces over the
course of history.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">epochs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Renaissance&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1300</span><span class="p">,</span> <span class="mi">1549</span><span class="p">],</span>
    <span class="s2">&quot;Baroque&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1550</span><span class="p">,</span> <span class="mi">1649</span><span class="p">],</span>
    <span class="s2">&quot;Classical&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1650</span><span class="p">,</span> <span class="mi">1749</span><span class="p">],</span>
    <span class="s2">&quot;Early</span><span class="se">\n</span><span class="s2">Romantic&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1750</span><span class="p">,</span> <span class="mi">1819</span><span class="p">],</span>
    <span class="s2">&quot;Late Romantic/</span><span class="se">\n</span><span class="s2">Modern&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1820</span><span class="p">,</span> <span class="mi">2000</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">strata</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;diatonic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;chromatic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;enharmonic&quot;</span>
<span class="p">]</span>

<span class="n">widths</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;display_year&quot;</span><span class="p">,</span> <span class="s2">&quot;lof_range&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;display_year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">widths</span><span class="p">[</span>
            <span class="p">(</span><span class="n">widths</span><span class="o">.</span><span class="n">display_year</span> <span class="o">&gt;=</span> <span class="n">epochs</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">widths</span><span class="o">.</span><span class="n">display_year</span> <span class="o">&lt;=</span> <span class="n">epochs</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="p">][</span><span class="s2">&quot;lof_range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">strata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">6</span> <span class="k">else</span> <span class="n">strata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">12</span> <span class="k">else</span> <span class="n">strata</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">epochs</span>
    <span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">epochs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">strata</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="c1"># plt.title(&quot;Epochs&quot;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.3</span><span class="p">,</span><span class="mf">0.75</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">epochs</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">rotation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;img/epochs_regions.png&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="output_72_0.png" src="output_72_0.png" />
<div class="figure align-default" id="id14">
<img alt="Epochs" src="img/epochs_regions.png" />
<p class="caption"><span class="caption-text">Epochs</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p>Renaissance: largest diatonic proportion overall but mostly chromatic</p></li>
<li><p>Baroque: alost completely chromatic</p></li>
<li><p>Classical: enharmonic proportion increases -&gt; more distant
modulations</p></li>
<li><p>This trend continues through the Romantic eras</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p><ol class="arabic">
<li><p>We have analyzed a very specific aspect of Western classical music.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="2">
<li><p>We have used a large(-ish) corpus to answer our research question.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="3">
<li><p>We have operationalized musical pieces as vectors that
represent distributions of tonal pitch-classes.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="4">
<li><p>We have used the dimensionality-reduction technique
Principal Component Analysis (PCA) in order to visually
inspect the distribution of the data in 2 and 3 dimensions.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="5">
<li><p>We have used music-theoretical domain knowledge to find
meaningful structure in this space.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="6">
<li><p>We have seen that pieces are largely distributed along
the line of fifths.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="7">
<li><p>We have used Locally Weighted Scatterplot Smoothing
(LOWESS) to estimate the variance in this
historical process.</p>
</p><p class="fragment fade-in"><ol class="arabic" start="8">
<li><p>We have seen that, historically, composers
explore ever larger regions on this line and
that the variance also increases.</p>
</p></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Data-driven approaches to music analysis offer new ways of studying
music history.</p></li>
<li><p>One of the largest obstacles is the lack of appropriate data (maybe
you could help improve the situation?)</p></li>
<li><p>It is difficult to operationalize/formalize musical concepts.</p></li>
<li><p>Good news: there is a lot to be done for Master/PhD students!</p></li>
</ol>
</div>
<div class="section" id="the-end">
<h2>The end<a class="headerlink" href="#the-end" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Thank you very much for participating in this workhop</p></li>
<li><p>I would appreciate it if you would send me some feedback (mail:
<a class="reference external" href="mailto:fabian&#46;moss&#37;&#52;&#48;epfl&#46;ch">fabian<span>&#46;</span>moss<span>&#64;</span>epfl<span>&#46;</span>ch</a>; Twitter:
[&#64;fabianmoss](<a class="reference external" href="https://twitter.com/fabianmoss">https://twitter.com/fabianmoss</a>))</p></li>
<li><p>Please get in touch if you are interested in working on a small
project</p></li>
<li><p>Special thanks to Diana Kayser for organization and making everyhing
possible!!!</p></li>
<li><p>My funding: École Polytechnique Fédérale de Lausane (EPFL) and Swiss
National Science Foundation (SNSF)</p></li>
</ul>
</div>
</div>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2020, Fabian C. Moss.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>.
</div>
            </div>
          </div>
      </page>
    </div>
    
    
  </body>
</html>