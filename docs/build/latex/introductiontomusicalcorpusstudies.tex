%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Content}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{Introduction to Musical Corpus Studies}
\date{Aug 26, 2020}
\release{0.0.1}
\author{Fabian C.\@{} Moss}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\begin{sphinxadmonition}{warning}{Warning:}
This material is still (heavily) under construction and might change throughout the course!

You can help improving the course and \sphinxhref{mailto:fabian.moss@epfl.ch}{let me know} about any errors and inconsistencies that you find
or suggest other ways of improving the course.
\end{sphinxadmonition}
\subsubsection*{Welcome!}

These pages present the content of the course “Introduction to Musical Corpus Studies” at the \sphinxhref{http://musikwissenschaft.phil-fak.uni-koeln.de/}{Institute of Musicology},
given at \sphinxhref{https://uni-koeln.de/}{University of Cologne} in Fall 2020.

In the last two decades \sphinxstyleemphasis{Musical Corpus Studies} evolved from a niche discipline into a veritable research area.
The growing availability of digital and digitized musical data as well as the application and development of modern
methodologies from computer science, machine learning, and data science cast new light on old musicological questions
and generate entirely novel approaches to empirical music research.

Moreover, the general methodological and epistemological approach of Musical Corpus Studies allows to transcend traditional
intra\sphinxhyphen{}musicological boundaries between its sub\sphinxhyphen{}disciplintes (historical/systematic/ethnological/…) without sacrificing the
respective specific viewpoints and perspectives.

This course offers a fundamental and practical introduction into these topics.
It demonstrates, explores, and critically reflects central thematic areas and methods by means of a number of case studies.
In the engagement with these topics the course also introduces elementary methods from natural language and music processing,
as well as statistics, data analysis and visualization.

The course is aimed at students at the undergraduate level who have little or no empirical background and are curious
about quantitative approaches to musicology.


\chapter{Organization}
\label{\detokenize{1_orga:organization}}\label{\detokenize{1_orga::doc}}

\begin{savenotes}\sphinxattablestart
\centering
\begin{tabular}[t]{|\X{10}{100}|\X{15}{100}|\X{15}{100}|\X{10}{100}|\X{25}{100}|\X{25}{100}|}
\hline
\sphinxstyletheadfamily 
No.
&\sphinxstyletheadfamily 
Date
&\sphinxstyletheadfamily 
Time
&\sphinxstyletheadfamily 
Room \sphinxfootnotemark[1]
&\sphinxstyletheadfamily 
Topic
&\sphinxstyletheadfamily 
Methods
\\
\hline%
\begin{footnotetext}[1]\sphinxAtStartFootnote
A: Alter Seminarraum 1.408; B: Neuer Seminarraum 1.315
%
\end{footnotetext}\ignorespaces 
1
&
Fr., 13.11.2020
&
16:00\sphinxhyphen{}17:20 Uhr
&
B
&
Introduction / Background
&\\
\hline
2
&&
17:40\sphinxhyphen{}19:00 Uhr
&&
Folk Songs, Melodies, Pitches and Intervals
&
frequencies, 
mean, 
variance
\\
\hline
3
&
Sa., 14.11.2020
&
09:00\sphinxhyphen{}10:20 Uhr
&
B
&
Jazz Solos, Melodies
&
Regular Expressions
\\
\hline
4
&&
10:40\sphinxhyphen{}12:00 Uhr
&&
Beethoven’s string quartets 
Harmony
&
\(n\)\sphinxhyphen{}grams, 
Markov models
\\
\hline&&
12:00\sphinxhyphen{}13:00 Uhr
&&
Lunch Break
&\\
\hline
5
&&
13:00\sphinxhyphen{}14:20 Uhr
&&
Pop Charts Billboard 100, harmony,
&
Hidden Markov Models
\\
\hline
6
&&
14:40\sphinxhyphen{}16:00 Uhr
&&
Free group work
&\\
\hline
7
&
Fr., 11.12.2020
&
10:00\sphinxhyphen{}11:20 Uhr
&
A
&
Brazilian Choro, harmony, form,
&
Context\sphinxhyphen{}Free Grammars
\\
\hline
8
&&
11:40\sphinxhyphen{}13:00 Uhr
&&
19th century piano music, harmony
&
Probabilistic CFGs
\\
\hline
9
&
Sa., 12.12.2020
&
09:00\sphinxhyphen{}10:20 Uhr
&
B
&
Malian Percussion Music, rhythm, meter
&\\
\hline
10
&&
10:40\sphinxhyphen{}12:00 Uhr
&&
Electronic Music 1950\sphinxhyphen{}1990
&\\
\hline&&
12:00\sphinxhyphen{}13:00 Uhr
&&
Lunch Break
&\\
\hline
11
&&
13:00\sphinxhyphen{}14:20 Uhr
&&
Free group work
&\\
\hline
12
&&
14:40\sphinxhyphen{}16:00 Uhr
&&
Recapitulation and conclusion
&\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}

\begin{sphinxadmonition}{important}{Important:}
Ich gehe in der Seminarplanung von 12 Semesterwochen à 2 SWS aus, für das gesamte Blockseminar also 24 SWS.
Das Seminar wird mit 3 CP bewertet, was 90 Stunden aktiver Arbeit entspricht.
Davon entfallen 24 SWS an die Präsenzzeit im Seminar plus 48 SWS an Vor\sphinxhyphen{} und Nachbereitung der Seminarsitzungen.
Die verbleibenden 18 SWS sind für die Lektüre der Fachliteratur vorgesehen.
\end{sphinxadmonition}


\chapter{Introduction to Musical Corpus Studies}
\label{\detokenize{2_introduction:introduction-to-musical-corpus-studies}}\label{\detokenize{2_introduction::doc}}
\noindent{\hspace*{\fill}\sphinxincludegraphics[width=1.000\linewidth]{{abstract_bg}.jpg}\hspace*{\fill}}


\section{What are Musical Corpus Studies?}
\label{\detokenize{2_introduction:what-are-musical-corpus-studies}}
tbc… (text from diss?)


\section{Epistemological goals}
\label{\detokenize{2_introduction:epistemological-goals}}
tbc…


\section{Issues}
\label{\detokenize{2_introduction:issues}}
tbc \sphinxcite{conclusion:cook2006}\sphinxcite{conclusion:honing2006}\sphinxcite{conclusion:huron2013}\sphinxcite{conclusion:marsden2016}\sphinxcite{conclusion:neuwirth2016}\sphinxcite{conclusion:pugin2005}\sphinxcite{conclusion:schaffer2016}\sphinxcite{conclusion:temperley2013}


\section{MCS and traditional musicology}
\label{\detokenize{2_introduction:mcs-and-traditional-musicology}}
tbc


\chapter{Folk Songs and the Melodic Arc}
\label{\detokenize{3_folk_songs:folk-songs-and-the-melodic-arc}}\label{\detokenize{3_folk_songs::doc}}
Huron… / MusThe Tutorial


\chapter{Solos in the \sphinxstyleemphasis{Weimar Jazz Database}}
\label{\detokenize{4_jazz_solos:solos-in-the-weimar-jazz-database}}\label{\detokenize{4_jazz_solos::doc}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{jazz}.jpg}
\caption{Photo by \sphinxhref{https://unsplash.com/@janinekrob?utm\_source=unsplash\&amp;utm\_medium=referral\&amp;utm\_content=creditCopyText}{Janine Robinson}
on \sphinxhref{https://unsplash.com/s/photos/jazz?utm\_source=unsplash\&amp;utm\_medium=referral\&amp;utm\_content=creditCopyText}{Unsplash}}\label{\detokenize{4_jazz_solos:id3}}\end{figure}

The first project we will have a look at is the \sphinxhref{https://jazzomat.hfm-weimar.de/}{Jazzomat} project.
Transcriptions of Jazz solos \sphinxcite{conclusion:pfleiderer2017}. The \sphinxstyleemphasis{Weimar Jazz Database} (WJD) consists of
456 transcriptions of Jazz solos from diverse substyles.
As all the corpora that we deal with here, it is freely available on the internet. %
\begin{footnote}[1]\sphinxAtStartFootnote
\sphinxurl{https://jazzomat.hfm-weimar.de/dbformat/dboverview.html}
%
\end{footnote}

The WJD contains a number of tables:


\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Tables in the \sphinxstyleemphasis{Weimar Jazz Database}}\label{\detokenize{4_jazz_solos:id4}}
\sphinxaftertopcaption
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Table name
&\sphinxstyletheadfamily 
Description
\\
\hline
\sphinxcode{\sphinxupquote{beats}}
&
Table for beat annotation of WJD melodies, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{composition\_info}}
&
Infos regarding the underlying composition of a WJD solo, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{db\_info}}
&
Information regarding the distributed database file like version information, license, etc
\\
\hline
\sphinxcode{\sphinxupquote{esac\_info}}
&
EsAC infos for EsAC melodies, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{melody}}
&
Main table for all melody events
\\
\hline
\sphinxcode{\sphinxupquote{melody\_type}}
&
Indicated type of melody: WJD solos or EsAC (Folk songs using Essen Associative Code), referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{popsong\_info}}
&
Pop song infos, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{record\_info}}
&
Infos regarding the specific audio recording of a WJD solo was taken from, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{sections}}
&
All sections (phrase, chorus, form, chords, etc.), referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{solo\_info}}
&
Solo infos for WJD solos, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\sphinxcode{\sphinxupquote{track\_info}}
&
Information specific to a track on a record (or CD)
\\
\hline
\sphinxcode{\sphinxupquote{transcription\_info}}
&
Transcription infos for WJD solos, referenced by \sphinxcode{\sphinxupquote{melody(melid)}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

Here, we focus on the main table \sphinxcode{\sphinxupquote{melody}}. First, we download the entire database from \sphinxurl{https://jazzomat.hfm-weimar.de/download/download.html}
(under “Weimar Jazz Database”) and save it as the file \sphinxcode{\sphinxupquote{wjazz.db}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{sqlite3} \PYG{c+c1}{\PYGZsh{} for working with databases}
\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k+kn}{as} \PYG{n+nn}{pd} \PYG{c+c1}{\PYGZsh{} for working with tabular data}

\PYG{c+c1}{\PYGZsh{} create connection to database}
\PYG{n}{conn} \PYG{o}{=} \PYG{n}{sqlite3}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{wjazzd.db}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} read all entries of the `melody` table into a pandas DataFrame}
\PYG{n}{df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}sql}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM melody}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{con}\PYG{o}{=}\PYG{n}{conn}\PYG{p}{)}

\PYG{n}{df}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{df}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\PYG{g+go}{output}
\end{sphinxVerbatim}

The part of the code \sphinxcode{\sphinxupquote{SELECT * FROM melody}} reads “Select all entries from the table ‘melody’”.


\chapter{Harmony in Beethoven’s String Quartets}
\label{\detokenize{beethoven_harmony:harmony-in-beethoven-s-string-quartets}}\label{\detokenize{beethoven_harmony::doc}}

\section{Access the data}
\label{\detokenize{beethoven_harmony:access-the-data}}
The data lies on the GitHub repository \sphinxhref{https://github.com/DCMLab/ABC}{DCMLab/ABC}.
Either download the \sphinxcode{\sphinxupquote{.tsv}} file directly and open it in pandas or load it from the URL as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k+kn}{as} \PYG{n+nn}{pd}

\PYG{n}{df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://github.com/DCMLab/ABC/corpus.tsv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{sep}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

The corpus is now stored in the variable \sphinxcode{\sphinxupquote{df}}.


\section{Harmonic Annotations}
\label{\detokenize{beethoven_harmony:harmonic-annotations}}\begin{itemize}
\item {} 
regular expressions

\end{itemize}

\sphinxcite{conclusion:neuwirth2018}\sphinxcite{conclusion:moss2019}


\section{Chord Transitions}
\label{\detokenize{beethoven_harmony:chord-transitions}}\begin{itemize}
\item {} 
n\sphinxhyphen{}grams

\end{itemize}


\chapter{Harmonic Clusters in Pop Charts}
\label{\detokenize{billboard:harmonic-clusters-in-pop-charts}}\label{\detokenize{billboard::doc}}
\noindent{\hspace*{\fill}\sphinxincludegraphics[width=1.000\linewidth]{{pop}.jpg}\hspace*{\fill}}

Clustering analysis in \sphinxcite{conclusion:schaffer2020}.


\chapter{Harmony and Form in Brazilian Choro}
\label{\detokenize{choro:harmony-and-form-in-brazilian-choro}}\label{\detokenize{choro::doc}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{choro}.jpg}
\caption{A 2019 musical tribute to renowned choro composer Jacob do Bandolim,
on the 50th anniversary of his death in Sao Paulo, Brazil. (c) Governo do Estado de Sao Paulo / CC BY 2.0}\label{\detokenize{choro:id2}}\end{figure}


\section{Data}
\label{\detokenize{choro:data}}
The \sphinxstyleemphasis{Choro Songbook Corpus} contains transcriptions of the chord symbols
of 295 Choro pieces \sphinxcite{conclusion:moss2020}. It is available on \sphinxhref{https://zenodo.org/record/3881347\#.X0OqHcgzbg4}{Zenodo} or \sphinxhref{https://github.com/DCMLab/choro/tree/1.1}{Github}.
See this link for a performance of the piece “\sphinxhref{https://youtu.be/HuukCWIImnY}{Lamentos}”

As before, we can import our data from a public resource.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{https://raw.githubusercontent.com/DCMLab/choro/1.1/data/choro.tsv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{sep}\PYG{o}{=}\PYGZbs{}\PYG{n}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{)}
\end{sphinxVerbatim}

And display the first rows of the data frame:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{df}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}


\chapter{A Data\sphinxhyphen{}Driven History of Tonality}
\label{\detokenize{tonality:a-data-driven-history-of-tonality}}\label{\detokenize{tonality::doc}}
\noindent{\hspace*{\fill}\sphinxincludegraphics[width=1.000\linewidth]{{score}.jpg}\hspace*{\fill}}


\section{Musical Pieces as Tonal Pitch\sphinxhyphen{}Class Distributions}
\label{\detokenize{tonality:musical-pieces-as-tonal-pitch-class-distributions}}
Musical pieces are composed of notes which have a certain pitch, a certain duration, and are
located in a specific position in a piece. Here, we disregard both the location and the duration
of notes and consider only the pitch dimension of musical notes when counting them. It is
moreover common to consider notes to be equivalent if their respective pitches are related by
one or multiple octaves, and thus to speak of \sphinxstyleemphasis{pitch classes}. Pitch classes come in two varieties.
The first, most commonly used representation in computational musicology and music
information retrieval, distinguishes twelve different pitch classes. This representation system
also assumes the enharmonic equivalence of certain notes, e.g. \(\text{F}\sharp\)
and \(\text{G}\flat\), \(\text{C}\flat\) and B, etc. The
assumption of enharmonic equivalence is usually a consequence of music encoding formats
that assume twelve\sphinxhyphen{}tone equal temperament, e.g. MIDI, in which enharmonically equivalent
notes are indistinguishable. The assumptions of octave and enharmonic equivalence allow to
represent pitch classes as residuals in \(\mathbb{Z}_{12}\) and to arrange them on a circle.
This arrangement of pitch classes is shown in \hyperref[\detokenize{tonality:circle-of-fifths}]{Fig.\@ \ref{\detokenize{tonality:circle-of-fifths}}}, called the \sphinxstyleemphasis{circle of fifths}.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=0.500\linewidth]{{circle_of_fifths}.png}
\caption{Schematic depiction of the twelve neutral pitch\sphinxhyphen{}classes in \(\mathbb{Z}_{12}\) on the circle of fifths. One
representative of each neutral pitch\sphinxhyphen{}class is shown as a tonal pitch\sphinxhyphen{}class label next to the
node. The coloring of the nodes corresponds to the colors of the keys on the piano.}\label{\detokenize{tonality:id16}}\label{\detokenize{tonality:circle-of-fifths}}\end{figure}

The numbers correspond to pitch classes in the order of fifths that can be transformed to chromatic ordering, the
chromatic circle, by the mapping \(t \mapsto 7 t \mod 12\). Pitch classes that correspond to white
keys on the piano are shown in white and pitch classes that correspond to black keys on the
piano are shown in black. The second variant of pitch classes does not assume enharmonic
equivalence but only that octave\sphinxhyphen{}related notes are equivalent, and is hence more general.
This representation allows to arrange pitch classes on the \sphinxstyleemphasis{line of fifths} \DUrole{bibtex}{{[}Temperley2000{]}}.
This linear of ordering tonal pitch\sphinxhyphen{}classes has been used by a number of music theorists, e.g.
\DUrole{bibtex}{{[}Weber1851{]}}\DUrole{bibtex}{{[}Riemann1900{]}}\DUrole{bibtex}{{[}Handschin1948{]}}\DUrole{bibtex}{{[}Bardos1956{]}}. It is shown in \hyperref[\detokenize{tonality:line-of-fifths}]{Fig.\@ \ref{\detokenize{tonality:line-of-fifths}}}.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{line_of_fifths}.png}
\caption{Schematic depiction of the tonal pitch\sphinxhyphen{}classes on the line of fifths mapped to integers in \(\mathbb{Z}\).}\label{\detokenize{tonality:id17}}\label{\detokenize{tonality:line-of-fifths}}\end{figure}

\begin{sphinxadmonition}{tip}{Tip:}
Think of other possible equivalence relations for pitch classes.
E.g. which relation do we need to distinguish only two classes, high and low with respect to middle C?
\end{sphinxadmonition}

Following \DUrole{bibtex}{{[}Temperley2000{]}}, we call the first representation \sphinxstyleemphasis{neutral pitch\sphinxhyphen{}classes} and the
second one \sphinxstyleemphasis{tonal pitch\sphinxhyphen{}classes}. The linear structure of the line of fifths allows to associate each
tonal pitch\sphinxhyphen{}class with an integer \(k \in \mathbb{Z}\) such that this integer represents the number of perfect
fifths that lie between this pitch\sphinxhyphen{}class and C (Gárdonyi and Nordhoff, 2002). In other words,
the integer \(k \in \mathbb{Z}\) corresponds to the number of flats (negative integers) or sharps (positive
integers) that the major key has in which this tonal pitch\sphinxhyphen{}class is the root. For example,
D is mapped to +2 because D major has a key signature with two sharps, \(\text{A}\flat\) is mapped
to \(-4\) because the key signature for \(\text{A}\flat\) major has four flats, and C is mapped to 0 because
its key signature does not have any accidentals. Yet another benefit of this representation
can be seen in the way in which we associate each tonal pitch\sphinxhyphen{}class with a color. Positive
integers (‘sharpened’ tonal pitch\sphinxhyphen{}classes) are associated with increasingly darker shades of
red, negative integers are associated with increasingly darker shades of blue (‘flattened’ tonal
pitch\sphinxhyphen{}classes), and C is associated with white as the neutral origin of the line of fifths. This
color mapping is used throughout this part. The line of fifths does not only contain all tonal
pitch\sphinxhyphen{}classes but also a number of central musical scales. For example, pentatonic scales are
segments of length 4 (containing five pitch classes) on the line of fifths, e.g. from \(\text{G}\flat\) to \(\text{B}\flat\),
diatonic scales are defined by segments of lenght 6, e.g. from F to B, the early extensions of
the natural diatonic scale by \(\text{B}\flat\) and \(\text{F}\sharp\)
correspond to the segment spanning the eight fifths on
the line between these two tonal pitch\sphinxhyphen{}classes, and the two whole\sphinxhyphen{}tone scales correspond to
the odd and even numbers, respectively. Theoretically, the line of fifths extends to infinity in
both directions but in actual compositions only a small segment of it is used. In the corpus
that is used here, we consider only the segment from \(\text{F}\flat\flat\) to \(\text{B}\sharp\sharp\)
because no piece in the corpus
contains tonal pitch\sphinxhyphen{}classes outside this range. The vocabulary size of the corpus is thus
\(V = 35\), consisting of the seven natural pitch\sphinxhyphen{}classes F, C, G, D, A, E, B with two, one, or zero
sharps or flats, respectively. While the transformation of tonal into neutral pitch\sphinxhyphen{}classes is
achieved by deterministically mapping a tonal pitch\sphinxhyphen{}class \(t \in \mathbb{Z}\) to a neutral pitch\sphinxhyphen{}class
\(t \mapsto t \mod 12 \in \mathbb{Z}_{12}\) (in fifths ordering), the reverse direction involves some kind of inference and is
called the problem of pitch spelling (\DUrole{bibtex}{{[}Temperley2001{]}}\DUrole{bibtex}{{[}Cambouropoulos2003{]}}\DUrole{bibtex}{{[}Stoddard2004{]}}\DUrole{bibtex}{{[}Chew2005{]}}\DUrole{bibtex}{{[}Meredith2006{]}}).

helix

Due to the encoding of the corpus, we adopt the
representation of pieces as bags of notes (see Section\textasciitilde{}ref\{sec:bagofnotes\})
and represent each one as a distribution over the \(V=35\) tonal pitch\sphinxhyphen{}classes.
That is, in the corpus used here with \(D=2012\) pieces, the tonal pitch\sphinxhyphen{}class distribution of a musical piece \(x_d\)
is given by the relative frequencies of the tonal pitch class in that piece, for \(d\in \{1,\ldots,D\}\).
Each piece is thus described by a \(V\)\sphinxhyphen{}dimensional vector, \(x_d \in \mathbb R^V, \forall d \in\{1,\ldots,D\}\),
containing positive real numbers that sum to 1.
In this chapter, we do not make any further assumptions about the process that generated
this distribution and will postpone these considerations until Chapter\textasciitilde{}ref\{chap:tonal\_profiles\}.

In this view, pieces simply correspond to points in the \(V - 1\)\sphinxhyphen{}simplex
\begin{equation*}
\begin{split}\Delta^{V-1} =       \left\{ x_d \in \mathbb{R}^V
\,\middle\vert\, \sum_{i=1}^V x_{d,i} = 1;\; x_{d,i}\geq 0 \right\}.\end{split}
\end{equation*}
In this space, those pieces with very different tonal pitch\sphinxhyphen{}class distributions will be very distant,
whereas pieces that have similar tonal pitch\sphinxhyphen{}class distributions will be closer to one another and form clusters
in the \(V-1\)\sphinxhyphen{}simplex.
It is important to note that the bag\sphinxhyphen{}of\sphinxhyphen{}notes representation relies on the assumption that the \(V\) dimensions are independent,
meaning that this model does not \sphinxstyleemphasis{a priori} assume any particular order between the tonal pitch\sphinxhyphen{}classes.

The average tonal pitch\sphinxhyphen{}class distribution of all pieces in the corpus is shown in Figure\textasciitilde{}ref\{fig:pca\_mean\}.
Figure\textasciitilde{}ref\{fig:tpc\_mean\_dist\_periods\} in the appendix shows this distribution separately
for each century from 1361 to 1943.
Although we know that one can in principle order all tonal pitch\sphinxhyphen{}classes on the line of fifths
(\hyperref[\detokenize{tonality:line-of-fifths}]{Fig.\@ \ref{\detokenize{tonality:line-of-fifths}}}), we do not incorporate this assumption into the model but
will show instead that it can be inferred from the data.


\subsection{Distributions of TPCs}
\label{\detokenize{tonality:distributions-of-tpcs}}
What are (discrete) distributions?

entropy

\sphinxstylestrong{Hypothesis: similar pieces have similar distributions}

operationalization: distances in vector space

Assumption (for coloring): tonal center is approximated by most frequent note

Taking tonal spaces into account: the line of fifths (dimensionality reduction, clustering, t\sphinxhyphen{}SNE, PCA)


\subsection{Principle Component Analysis}
\label{\detokenize{tonality:principle-component-analysis}}
Since the dimensionality of \(\Delta^{V-1}\) is
\(|\{\text{C}, \text{D}, \text{E}, \text{F}, \text{G}, \text{A}, \text{B}\}| \cdot |\{\flat\flat, \flat, \natural, \sharp, \sharp\sharp\}| = 35\), it is impossible to visualize
this space and pieces in it to see whether their arrangement contains any meaningful information.
We address this problem by using a method for \sphinxstyleemphasis{dimensionality reduction}
called \sphinxstyleemphasis{Principal Component Analysis} (PCA) \DUrole{bibtex}{{[}Bishop2006{]}}
that projects the data into a lower\sphinxhyphen{}dimensional space while at the same time maintaining
as many characteristic properties of the original space as possible.
PCA thus can aid to achieve a better understanding of
the global structure of the space. %
\begin{footnote}[1]\sphinxAtStartFootnote
While PCA is one of the most commonly used methods for dimensionality reduction, there are many others
(sometimes relying on particular assumptions about the distribution of the data).
In a qualitative comparison, \sphinxstyleemphasis{Locally Linear Embedding} \DUrole{bibtex}{{[}Roweis2000{]}} achieved a similar picture,
whereas \sphinxstyleemphasis{t\sphinxhyphen{}distributed Stochastic Neighbor Embedding} (t\sphinxhyphen{}SNE) \DUrole{bibtex}{{[}VanDerMaaten2008{]}}
that does emphasize the local over the global structure of the data did not.
We opted here for PCA because it preserves most
of the global structure and the interpretation of the results is straight\sphinxhyphen{}forward.
%
\end{footnote}

PCA considers the data to be represented as a matrix
\begin{equation*}
\begin{split}X = \left[\begin{array}{c}
               x_1^\top \\
               \vdots \\
               x_D^\top \\
            \end{array}
         \right] \in [0,1]^{D \times V},\;   x_d \in \Delta^{V-1},\end{split}
\end{equation*}
where the rows are given by the \(D\) data points, the pieces in the corpus,
and the columns are given by the \(V\) features, the number of distinct tonal pitch\sphinxhyphen{}classes in the vocabulary.
All entries in \(X\) range between 0 and 1 and all rows of \(X\) sum to 1 because the pieces are represented
as distributions.
PCA determines the \(M\leq V\) largest directions and magnitudes of the variance in the data in \(X\) by first
calculating the \sphinxstyleemphasis{covariance matrix}
\begin{equation*}
\begin{split}K_X = \mathrm{cov}[X,X] = \mathrm{E}[(X-\bar{x})(X-\bar{x})^\top] \in\mathbb R^{D\times D},\end{split}
\end{equation*}
where \(\mathrm{E}\) denotes the expected value and \(\bar{x}\in[0,1]^V\) is the mean of the columns of \(X\).
The main directions of the variance in the data and their magnitude is given by the eigenvectors \(w_i\)
and eigenvalues \(\lambda_i\) of \(K_X\) which can be calculated by solving
\begin{equation*}
\begin{split}K \cdot w_i = \lambda \cdot w_i.\end{split}
\end{equation*}
The projection into the lower\sphinxhyphen{}dimensional space is then achieved by selecting the \(M\) largest eigenvalues
and their corresponding eigenvectors and transform the data to \(X^\prime\), the dimensionality reduction of \(X\) by
\begin{equation*}
\begin{split}X^\prime = X \cdot \left[ w_1,        \ldots, w_M \right]\in \mathbb R^{D\times M}\end{split}
\end{equation*}
The sum of all eigenvalues \(\lambda_i\) is the total amount of variance in the data and the variance explained
by each principal component is given by \(\lambda_i / \sum_j \lambda_j\).

In the present context, \(X\) was transformed to have zero mean before applying PCA
but that the variance was not standardized to 1.
This was done because the features all are on the same scale and because the
differences in the variance between the respective tonal pitch\sphinxhyphen{}classes is of particular
interest here.


\section{Historical Development}
\label{\detokenize{tonality:historical-development}}
historical expansion on line of fifths,


\subsection{LOWESS}
\label{\detokenize{tonality:lowess}}

\chapter{Malian Percussion Music}
\label{\detokenize{mali_percussion:malian-percussion-music}}\label{\detokenize{mali_percussion::doc}}

\chapter{Electronic Music 1950\textendash{}1990}
\label{\detokenize{electronic:electronic-music-1950-1990}}\label{\detokenize{electronic::doc}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{electro}.jpg}
\caption{Photo by \sphinxhref{https://unsplash.com/@antoinejulien?utm\_source=unsplash\&amp;utm\_medium=referral\&amp;utm\_content=creditCopyText}{Antoine Julien}
on \sphinxhref{https://unsplash.com/s/photos/electronic-music?utm\_source=unsplash\&amp;utm\_medium=referral\&amp;utm\_content=creditCopyText}{Unsplash}.}\label{\detokenize{electronic:id1}}\end{figure}


\chapter{Conclusion}
\label{\detokenize{conclusion:conclusion}}\label{\detokenize{conclusion::doc}}
Final thoughts, critical discussion…

{[}Some image{]}



\begin{sphinxthebibliography}{PFAbesse}
\bibitem[Coo06]{conclusion:cook2006}
Nicholas Cook. Border Crossings: A Commentary on Henkjan Honing’s “On the Growing Role of Observation, Formalization and Experimental Method in Musicology”. \sphinxstyleemphasis{Empirical Musicology Review}, 1(1):7\textendash{}11, 2006.
\bibitem[Hon06]{conclusion:honing2006}
Henkjan Honing. On the Growing Role of Observation, Formalization and Experimental Method in Musicology. \sphinxstyleemphasis{Empirical Musicology Review}, 1(1):2\textendash{}6, 2006.
\bibitem[Hur13]{conclusion:huron2013}
David Huron. On the Virtuous and the Vexatious in an Age of Big Data. \sphinxstyleemphasis{Music Perception: An Interdisciplinary Journal}, 31(1):4\textendash{}9, 2013.
\bibitem[Mar16]{conclusion:marsden2016}
Alan Marsden. \sphinxstyleemphasis{Music Analysis by Computer: Ontology and Epistemology}. Springer, 2016.
\bibitem[MNHM19]{conclusion:moss2019}
Fabian C. Moss, Markus Neuwirth, Daniel Harasim, and Rohrmeier Martin. Statistical characteristics of tonal harmony: a corpus study of beethoven’s string quartets. \sphinxstyleemphasis{PLoS ONE}, 14(6):e0217242, 2019. \sphinxhref{https://doi.org/10.1371/journal.pone.0217242}{doi:10.1371/journal.pone.0217242}.
\bibitem[MSFR20]{conclusion:moss2020}
Fabian C. Moss, Willian Souza Fernandes, and Martin Rohrmeier. Harmony and form in Brazilian Choro: A corpus\sphinxhyphen{}driven approach to musical style analysis. \sphinxstyleemphasis{Journal of New Music Research}, 2020. \sphinxhref{https://doi.org/10.1080/09298215.2020.1797109}{doi:10.1080/09298215.2020.1797109}.
\bibitem[NHMR18]{conclusion:neuwirth2018}
Markus Neuwirth, Daniel Harasim, Fabian C. Moss, and Martin Rohrmeier. The Annotated Beethoven Corpus (ABC): A Dataset of Harmonic Analyses of All Beethoven String Quartets. \sphinxstyleemphasis{Frontiers in Digital Humanities}, 5(July):1\textendash{}5, 2018. \sphinxhref{https://doi.org/10.3389/fdigh.2018.00016}{doi:10.3389/fdigh.2018.00016}.
\bibitem[NR16]{conclusion:neuwirth2016}
Markus Neuwirth and Martin Rohrmeier. Wie wissenschaftlich muss Musiktheorie sein? Chancen und Herausforderungen musikalischer Korpusforschung. \sphinxstyleemphasis{Zeitschrift der Gesellschaft für Musiktheorie}, 13(2):171\textendash{}193, 2016. \sphinxhref{https://doi.org/10.31751/915}{doi:10.31751/915}.
\bibitem[PFAbesser+17]{conclusion:pfleiderer2017}
Martin Pfleiderer, Klaus Frieler, Jakob Abeßer, Wolf\sphinxhyphen{}Georg Zaddach, and Benjamin Burkhart, editors. \sphinxstyleemphasis{Inside the Jazzomat \sphinxhyphen{} New Perspectives for Jazz Research}. Schott Campus, 2017.
\bibitem[Pug15]{conclusion:pugin2005}
Laurent Pugin. The challenge of data in digital musicology. \sphinxstyleemphasis{Frontiers in Digital Humanities}, 2(4):1\textendash{}3, 2015. \sphinxhref{https://doi.org/10.3389/fdigh.2015.00004}{doi:10.3389/fdigh.2015.00004}.
\bibitem[Sch16]{conclusion:schaffer2016}
Kris Schaffer. What is computational musicology? online, 2016. URL: \sphinxurl{https://medium.com/@krisshaffer/what-is-computational-musicology-f25ee0a65102}.
\bibitem[SVJ+20]{conclusion:schaffer2020}
Kris Schaffer, Esther Vasiete, Brandon Jacquez, Aaron Davis, Diego Escalante, Calvin Hicks, Joshua McCann, Camille Noufi, and Paul Salminen. A cluster analysis of harmony in the McGill Billboard dataset. \sphinxstyleemphasis{Empirical Musicology Review}, 14(3\textendash{}4):146\textendash{}162, 2020. \sphinxhref{https://doi.org/10.18061/emr.v14i3-4.5576}{doi:10.18061/emr.v14i3\sphinxhyphen{}4.5576}.
\bibitem[TV13]{conclusion:temperley2013}
David Temperley and Leigh VanHandel. Introduction to the Special Issue on Corpus Methods. \sphinxstyleemphasis{Music Perception: An Interdisciplinary Journal}, 31(1):1\textendash{}3, 2013.
\end{sphinxthebibliography}



\renewcommand{\indexname}{Index}
\printindex
\end{document}