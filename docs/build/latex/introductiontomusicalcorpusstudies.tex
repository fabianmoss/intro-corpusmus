%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Content}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{2}


% Jupyter Notebook code cell colors
\definecolor{nbsphinxin}{HTML}{307FC1}
\definecolor{nbsphinxout}{HTML}{BF5B3D}
\definecolor{nbsphinx-code-bg}{HTML}{F5F5F5}
\definecolor{nbsphinx-code-border}{HTML}{E0E0E0}
\definecolor{nbsphinx-stderr}{HTML}{FFDDDD}
% ANSI colors for output streams and traceback highlighting
\definecolor{ansi-black}{HTML}{3E424D}
\definecolor{ansi-black-intense}{HTML}{282C36}
\definecolor{ansi-red}{HTML}{E75C58}
\definecolor{ansi-red-intense}{HTML}{B22B31}
\definecolor{ansi-green}{HTML}{00A250}
\definecolor{ansi-green-intense}{HTML}{007427}
\definecolor{ansi-yellow}{HTML}{DDB62B}
\definecolor{ansi-yellow-intense}{HTML}{B27D12}
\definecolor{ansi-blue}{HTML}{208FFB}
\definecolor{ansi-blue-intense}{HTML}{0065CA}
\definecolor{ansi-magenta}{HTML}{D160C4}
\definecolor{ansi-magenta-intense}{HTML}{A03196}
\definecolor{ansi-cyan}{HTML}{60C6C8}
\definecolor{ansi-cyan-intense}{HTML}{258F8F}
\definecolor{ansi-white}{HTML}{C5C1B4}
\definecolor{ansi-white-intense}{HTML}{A1A6B2}
\definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
\definecolor{ansi-default-inverse-bg}{HTML}{000000}

% Define an environment for non-plain-text code cell outputs (e.g. images)
\makeatletter
\newenvironment{nbsphinxfancyoutput}{%
    % Avoid fatal error with framed.sty if graphics too long to fit on one page
    \let\sphinxincludegraphics\nbsphinxincludegraphics
    \nbsphinx@image@maxheight\textheight
    \advance\nbsphinx@image@maxheight -2\fboxsep   % default \fboxsep 3pt
    \advance\nbsphinx@image@maxheight -2\fboxrule  % default \fboxrule 0.4pt
    \advance\nbsphinx@image@maxheight -\baselineskip
\def\nbsphinxfcolorbox{\spx@fcolorbox{nbsphinx-code-border}{white}}%
\def\FrameCommand{\nbsphinxfcolorbox\nbsphinxfancyaddprompt\@empty}%
\def\FirstFrameCommand{\nbsphinxfcolorbox\nbsphinxfancyaddprompt\sphinxVerbatim@Continues}%
\def\MidFrameCommand{\nbsphinxfcolorbox\sphinxVerbatim@Continued\sphinxVerbatim@Continues}%
\def\LastFrameCommand{\nbsphinxfcolorbox\sphinxVerbatim@Continued\@empty}%
\MakeFramed{\advance\hsize-\width\@totalleftmargin\z@\linewidth\hsize\@setminipage}%
\lineskip=1ex\lineskiplimit=1ex\raggedright%
}{\par\unskip\@minipagefalse\endMakeFramed}
\makeatother
\newbox\nbsphinxpromptbox
\def\nbsphinxfancyaddprompt{\ifvoid\nbsphinxpromptbox\else
    \kern\fboxrule\kern\fboxsep
    \copy\nbsphinxpromptbox
    \kern-\ht\nbsphinxpromptbox\kern-\dp\nbsphinxpromptbox
    \kern-\fboxsep\kern-\fboxrule\nointerlineskip
    \fi}
\newlength\nbsphinxcodecellspacing
\setlength{\nbsphinxcodecellspacing}{0pt}

% Define support macros for attaching opening and closing lines to notebooks
\newsavebox\nbsphinxbox
\makeatletter
\newcommand{\nbsphinxstartnotebook}[1]{%
    \par
    % measure needed space
    \setbox\nbsphinxbox\vtop{{#1\par}}
    % reserve some space at bottom of page, else start new page
    \needspace{\dimexpr2.5\baselineskip+\ht\nbsphinxbox+\dp\nbsphinxbox}
    % mimick vertical spacing from \section command
      \addpenalty\@secpenalty
      \@tempskipa 3.5ex \@plus 1ex \@minus .2ex\relax
      \addvspace\@tempskipa
      {\Large\@tempskipa\baselineskip
             \advance\@tempskipa-\prevdepth
             \advance\@tempskipa-\ht\nbsphinxbox
             \ifdim\@tempskipa>\z@
               \vskip \@tempskipa
             \fi}
    \unvbox\nbsphinxbox
    % if notebook starts with a \section, prevent it from adding extra space
    \@nobreaktrue\everypar{\@nobreakfalse\everypar{}}%
    % compensate the parskip which will get inserted by next paragraph
    \nobreak\vskip-\parskip
    % do not break here
    \nobreak
}% end of \nbsphinxstartnotebook

\newcommand{\nbsphinxstopnotebook}[1]{%
    \par
    % measure needed space
    \setbox\nbsphinxbox\vbox{{#1\par}}
    \nobreak % it updates page totals
    \dimen@\pagegoal
    \advance\dimen@-\pagetotal \advance\dimen@-\pagedepth
    \advance\dimen@-\ht\nbsphinxbox \advance\dimen@-\dp\nbsphinxbox
    \ifdim\dimen@<\z@
      % little space left
      \unvbox\nbsphinxbox
      \kern-.8\baselineskip
      \nobreak\vskip\z@\@plus1fil
      \penalty100
      \vskip\z@\@plus-1fil
      \kern.8\baselineskip
    \else
      \unvbox\nbsphinxbox
    \fi
}% end of \nbsphinxstopnotebook

% Ensure height of an included graphics fits in nbsphinxfancyoutput frame
\newdimen\nbsphinx@image@maxheight % set in nbsphinxfancyoutput environment
\newcommand*{\nbsphinxincludegraphics}[2][]{%
    \gdef\spx@includegraphics@options{#1}%
    \setbox\spx@image@box\hbox{\includegraphics[#1,draft]{#2}}%
    \in@false
    \ifdim \wd\spx@image@box>\linewidth
      \g@addto@macro\spx@includegraphics@options{,width=\linewidth}%
      \in@true
    \fi
    % no rotation, no need to worry about depth
    \ifdim \ht\spx@image@box>\nbsphinx@image@maxheight
      \g@addto@macro\spx@includegraphics@options{,height=\nbsphinx@image@maxheight}%
      \in@true
    \fi
    \ifin@
      \g@addto@macro\spx@includegraphics@options{,keepaspectratio}%
    \fi
    \setbox\spx@image@box\box\voidb@x % clear memory
    \expandafter\includegraphics\expandafter[\spx@includegraphics@options]{#2}%
}% end of "\MakeFrame"-safe variant of \sphinxincludegraphics
\makeatother

\makeatletter
\renewcommand*\sphinx@verbatim@nolig@list{\do\'\do\`}
\begingroup
\catcode`'=\active
\let\nbsphinx@noligs\@noligs
\g@addto@macro\nbsphinx@noligs{\let'\PYGZsq}
\endgroup
\makeatother
\renewcommand*\sphinxbreaksbeforeactivelist{\do\<\do\"\do\'}
\renewcommand*\sphinxbreaksafteractivelist{\do\.\do\,\do\:\do\;\do\?\do\!\do\/\do\>\do\-}
\makeatletter
\fvset{codes*=\sphinxbreaksattexescapedchars\do\^\^\let\@noligs\nbsphinx@noligs}
\makeatother



\title{Introduction to Musical Corpus Studies}
\date{Nov 14, 2020}
\release{0.0.1}
\author{Fabian C.\@{} Moss}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\noindent{\hspace*{\fill}\sphinxincludegraphics[width=1.000\linewidth]{{pattern}.jpg}\hspace*{\fill}}

\begin{sphinxadmonition}{warning}{Warning:}
This material is still (heavily) under construction and might change throughout the course!

You can help improving the course and \sphinxhref{mailto:fabian.moss@epfl.ch}{let me know} about any errors and inconsistencies that you find
or suggest other ways of improving the course.
\end{sphinxadmonition}
\subsubsection*{Welcome!}

These pages present the content of the course “Introduction to Musical Corpus Studies” at the \sphinxhref{http://musikwissenschaft.phil-fak.uni-koeln.de/}{Institute of Musicology},
given at \sphinxhref{https://uni-koeln.de/}{University of Cologne} in Fall 2020.

In the last two decades \sphinxstyleemphasis{Musical Corpus Studies} evolved from a niche discipline into a veritable research area.
The growing availability of digital and digitized musical data as well as the application and development of modern
methodologies from computer science, machine learning, and data science cast new light on old musicological questions
and generate entirely novel approaches to empirical music research.

Moreover, the general methodological and epistemological approach of Musical Corpus Studies allows to transcend traditional
intra\sphinxhyphen{}musicological boundaries between its sub\sphinxhyphen{}disciplintes (historical/systematic/ethnological/…) without sacrificing the
respective specific viewpoints and perspectives.

This course offers a fundamental and practical introduction into these topics.
It demonstrates, explores, and critically reflects central thematic areas and methods by means of a number of case studies.
In the engagement with these topics the course also introduces elementary methods from natural language and music processing,
as well as statistics, data analysis and visualization.

The course is aimed at students at the undergraduate level who have little or no empirical background and are curious
about quantitative approaches to musicology.


\chapter{Organization}
\label{\detokenize{01_organization:organization}}\label{\detokenize{01_organization::doc}}

\section{About this course}
\label{\detokenize{01_organization:about-this-course}}
This course aims at providing an example\sphinxhyphen{}based introduction to the rapidly developing field of Musical Corpus Studies (MCS).
Introducing a field that relies equally on musicological domain knowledge and skills in computational and statistical methods
faces obvious challenges: while most people interested in this field come with a background in either area,
few people are versed in both, and it can take years to bridge the musicological\sphinxhyphen{}computational gap.

In particular, systematic introductions to programming or specific musicological topics can be at times quite arduous, even boring,
because it takes a long time to proceed from learning basic concepts to acually interesting problems.
The problems and “toy examples” that are presented to introduce the basic concepts are necessarily remote from
real\sphinxhyphen{}world applications and challenging research problems.

This course takes an alternative route.
It does not start with an introduction to the programming language \sphinxhref{http://python.org/}{Python}
(which will be used throughout to carry out the computational analyses)
but rather showcases a number of recent corpus studies that take on musicological research questions.
The focus thus lies in understanding how aspects of music can be studied with computational methods
and by analyzing musical corpora.

If this sparks your interest, it will be much easier to pick up the basics for yourself,
knowing what they are \sphinxstyleemphasis{for} and being motivated intrinsically.
If you are not particularly interested in doing this kind of work yourself,
you will still see a broad range of applications that are much more useful to you than
learning (or not learning) programming basics.


\section{Overview}
\label{\detokenize{01_organization:overview}}
This year’s course takes place on two weekends (13\sphinxhyphen{}14 November and 11\sphinxhyphen{}12 December 2020),
comprising twelve sessions in total. The topics cover a broad range of musicological topics,
from folk melodies and Jazz solos, over harmonies in Beethoven’s string
quartets and 20th century Pop music, to Renaissance candences
and metric patterns in Malian drum music (see \hyperref[\detokenize{01_organization:tab-overview}]{Table \ref{\detokenize{01_organization:tab-overview}}}).


\begin{savenotes}\sphinxattablestart
\centering
\phantomsection\label{\detokenize{01_organization:tab-overview}}\nobreak
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
No.
&\sphinxstyletheadfamily 
Date
&\sphinxstyletheadfamily 
Time
&\sphinxstyletheadfamily 
Topics
\\
\hline
1
&
Fr., 13.11.2020
&
16:00\sphinxhyphen{}17:20 Uhr
&
Introduction / Background
\\
\hline
2
&&
17:40\sphinxhyphen{}19:00 Uhr
&
Melody I: Folk song melodies, notes, form
\\
\hline
3
&
Sa., 14.11.2020
&
09:00\sphinxhyphen{}10:20 Uhr
&
Melody II: The melodic arc, intervals
\\
\hline
4
&&
10:40\sphinxhyphen{}12:00 Uhr
&
Melody III: Jazz solos
\\
\hline&&
12:00\sphinxhyphen{}13:00 Uhr
&
\sphinxstyleemphasis{Lunch Break}
\\
\hline
5
&&
13:00\sphinxhyphen{}14:20 Uhr
&
Group work
\\
\hline
6
&&
14:40\sphinxhyphen{}16:00 Uhr
&
Harmony I: Beethoven’s string quartets
\\
\hline
7
&
Fr., 11.12.2020
&
10:00\sphinxhyphen{}11:20 Uhr
&
Harmony II: Cadences in Renaissance polyphony (guest: \sphinxhref{https://www.haverford.edu/users/rfreedma}{Richard Freedman})
\\
\hline
8
&&
11:40\sphinxhyphen{}13:00 Uhr
&
Harmony III \& Form: Brazilian Choro / Pop charts (Billboard 100)
\\
\hline
9
&
Sa., 12.12.2020
&
09:00\sphinxhyphen{}10:20 Uhr
&
Rhythm \& Meter: Malian percussion music
\\
\hline
10
&&
10:40\sphinxhyphen{}12:00 Uhr
&
Timbre: Electronic Music 1950\sphinxhyphen{}1990
\\
\hline&&
12:00\sphinxhyphen{}13:00 Uhr
&
\sphinxstyleemphasis{Lunch Break}
\\
\hline
11
&&
13:00\sphinxhyphen{}14:20 Uhr
&
Group work
\\
\hline
12
&&
14:40\sphinxhyphen{}16:00 Uhr
&
Recapitulation and conclusion
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{Credits}
\label{\detokenize{01_organization:credits}}
Active participation in this course is compensated with 3 credit points (CPs),
\sphinxhref{https://verwaltung.uni-koeln.de/abteilung21/content/studienangebot/studiengaenge\_u\_\_abschluesse/bachelor\_\_und\_masterstudiengaenge/index\_ger.html}{equivalent to a work load of 90 hours}.
These are distributed as follows: 24 SWS (à 45 minutes) are allocated to presence in the block seminar.
Additionally, 24 SWS are dedicated to the preparation and follow\sphinxhyphen{}up of the material.
The remainder of 42 SWS goes to the reading of the relevant literature.


\section{Deliverables and learning objectives}
\label{\detokenize{01_organization:deliverables-and-learning-objectives}}
Apart from attending and following the presentations by the lecturer,
course work consists of three main parts: preparing the relevant literature (reading),
completing the assigned exercises (group work), and critically engaging with the course materials
in the form of a report written together with your group (report).

These deliverables will broaden your knowledge and understanding of current musicological research,
enhance your organizational and social skills, and help you to develop efficient work\sphinxhyphen{}load management strategies.
Finally, compiling a report will advance your communication and writing abilities.
\subsubsection*{Reading}

For each session, the relevant literature is cited in the text and provided on
\sphinxhref{https://www.ilias.uni-koeln.de/ilias/goto\_uk\_crs\_3528627.html}{ILIAS}.
Careful preparation of the reading material is required in order to be able to follow the content of the course.
Because the course will mainly talk about methods and general points of musical corpus research,
the content (and musical topic) will mainly be introduced by the literature.

I am aware that the reading workload is relatively high since the course will be taught as a block seminar
and doesn’t spread out over the entire semester. I hope that the fact that the course is finished before the
end of the year compensates for this.
\subsubsection*{Group work}

At the beginning of the course, you will be randomly assigned to a group.
Together with your group (which will stay fixed for the entire semester),
you will work on a number of exercises during the course, e.g. in Zoom breakout rooms.
You will collaborate on specific tasks related to the topic at hand, discuss methodological questions,
and help each other in the understanding of some of the concepts that are introduced in the course.
\subsubsection*{Report}

After the course has ended, your group will be randomly assigned a course topic (one of the twelve sessions in \hyperref[\detokenize{01_organization:tab-overview}]{Table \ref{\detokenize{01_organization:tab-overview}}}).
It is your task to write a report on this theme. The should be 6\textendash{}8 pages long.

Questions that you could address are:
What did you learn? Which concepts are not clear? Which methods did you (not) understand?
What is missing? How can the textual descriptions be improved? Who in your group did what?
Was the presentation of the material adequate? If not, what was missing?
Please also write about the organization of your group, challenges and benefits.

\sphinxstylestrong{Recommended structure for the report}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxstylestrong{Introduction:} general description and summary of the course and your assigned session in particular.

\item {} 
\sphinxstylestrong{Discussion:} summarize the main discussion, open questions, and how you would continue this line or research.

\item {} 
\sphinxstylestrong{Issues:} describe in detail what was crucial for your understanding of the topic, what was missing, etc.

\item {} 
\sphinxstylestrong{Various:} anything that you would like to write in the report

\item {} 
\sphinxstylestrong{Author contributions:} describe briefly how each of you specifically contributed to the report.

\end{enumerate}

\begin{sphinxadmonition}{important}{Important:}
Submit your report by \sphinxstylestrong{31 January 2021, 23:59h} to \sphinxhref{mailto:fabian.moss@epfl.ch}{fabian.moss@epfl.ch}
as a single PDF file per group, named \sphinxtitleref{intro\_corpusmus\_\textless{}group\_number\textgreater{}.pdf}, e.g. \sphinxtitleref{intro\_corpusmus\_1.pdf}.
\end{sphinxadmonition}


\chapter{Introduction and Background}
\label{\detokenize{02_introduction:introduction-and-background}}\label{\detokenize{02_introduction::doc}}
\noindent{\hspace*{\fill}\sphinxincludegraphics[width=1.000\linewidth]{{abstract_bg}.jpg}\hspace*{\fill}}

\clearpage

\begin{sphinxadmonition}{note}{Note:}
The slides for the introduction can be found here: \sphinxhref{\_static/intro-corpusmus.pdf}{pdf}
\end{sphinxadmonition}


\chapter{Melodies in Folk Songs}
\label{\detokenize{03_melody_I:Melodies-in-Folk-Songs}}\label{\detokenize{03_melody_I::doc}}
\sphinxstylestrong{On Jupyter Hub, change the kernel to Python 3.7!}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k}{as} \PYG{n+nn}{pd}
\PYG{k+kn}{import} \PYG{n+nn}{music21} \PYG{k}{as} \PYG{n+nn}{m21}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\PYG{k+kn}{import} \PYG{n+nn}{statsmodels}\PYG{n+nn}{.}\PYG{n+nn}{api} \PYG{k}{as} \PYG{n+nn}{sm}

\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib} \PYG{k}{as} \PYG{n+nn}{mpl}

\PYG{k+kn}{import} \PYG{n+nn}{seaborn} \PYG{k}{as} \PYG{n+nn}{sns}
\PYG{n}{sns}\PYG{o}{.}\PYG{n}{set\PYGZus{}context}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{notebook}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{}\PYGZsh{} Tragen Sie hier bitte Ihren username ein:}
\PYG{c+c1}{\PYGZsh{} USERNAME = \PYGZdq{}fmoss\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{}\PYGZsh{} for jupyter hubs}
\PYG{c+c1}{\PYGZsh{} \PYGZpc{}env QT\PYGZus{}QPA\PYGZus{}PLATFORM=offscreen}
\PYG{c+c1}{\PYGZsh{} \PYGZsh{} new user, create music21 environment variables.}
\PYG{c+c1}{\PYGZsh{} m21.environment.set(\PYGZsq{}musicxmlPath\PYGZsq{}, value=\PYGZsq{}/usr/bin/mscore\PYGZsq{})}
\PYG{c+c1}{\PYGZsh{} m21.environment.set(\PYGZsq{}musescoreDirectPNGPath\PYGZsq{}, value=\PYGZsq{}/usr/bin/mscore\PYGZsq{})}
\PYG{c+c1}{\PYGZsh{} m21.environment.set(\PYGZsq{}graphicsPath\PYGZsq{}, value=f\PYGZsq{}/home/\PYGZob{}USERNAME\PYGZcb{}\PYGZsq{}) \PYGZsh{} change accordingly for your own username!}
\end{sphinxVerbatim}
}


\section{The \sphinxstyleemphasis{Essen Folksong Collection}}
\label{\detokenize{03_melody_I:The-Essen-Folksong-Collection}}
In this session, we work with a corpus of melodies, the \sphinxstyleemphasis{Essen Folksong Collection} (EFC). There are several ways to access this corpus, for example through the interface provided by the Center for Computer Assisted Research in the Humanities (CCARH) at Stanford University: \sphinxurl{http://essen.themefinder.org/} or via \sphinxurl{http://kern.ccarh.org/browse?l=essen}.

A more convenient way to work with the pieces is by using the Python library \sphinxcode{\sphinxupquote{music21}}. This library was developed and is maintaned my Mike Cuthbert at the MIT and is the most popular library for the computational analysis of symbolic music (i.e. scores). You can find its documentation here: \sphinxurl{http://web.mit.edu/music21/}

However, using \sphinxcode{\sphinxupquote{music21}} requires some training and getting used to its particular API (the way how to interact with its functions). We will not get into too many details here but rather showcase how it can be used for our purposes.

The first thing we do is to load the entire EFC and store it in a variable named \sphinxcode{\sphinxupquote{corpora}}.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} load corpus}
\PYG{n}{corpora} \PYG{o}{=} \PYG{n}{m21}\PYG{o}{.}\PYG{n}{corpus}\PYG{o}{.}\PYG{n}{getComposer}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{essenFolksong}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

Calling the variable \sphinxcode{\sphinxupquote{corpora}} shows that it consists of a list of file paths. Using the \sphinxcode{\sphinxupquote{len()}} function, we can find out how many corpora are stored in the variable \sphinxcode{\sphinxupquote{corpora}}.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{corpora}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}31
\end{sphinxVerbatim}
}

We can also directly call the variable \sphinxcode{\sphinxupquote{corpora}} to see what it contains:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{corpora}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}[WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/altdeu10.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/altdeu20.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad10.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad20.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad30.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad40.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad50.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad60.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad70.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/ballad80.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/boehme10.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/boehme20.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/dva0.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/erk10.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/erk20.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/erk30.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/erk5.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/fink0.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/folkHaydn.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/han1.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/han2.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/irl.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/kinder0.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/lot.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/lux.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/test0.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/test1.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/testd.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/teste.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/variant0.abc'),
 WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/zuccal0.abc')]
\end{sphinxVerbatim}
}

The variable \sphinxcode{\sphinxupquote{corpora}} is a list of file paths, each of which points to a corpus in this collection. Note that the location depends on the location where \sphinxcode{\sphinxupquote{music21}} is installed. If you would do this on your own computer, you would see different paths. The file names at the end of the file paths indicate what they contain, e.g. \sphinxcode{\sphinxupquote{altdeu10.abc}} contains old German folksongs, \sphinxcode{\sphinxupquote{boehme10.abc}} contains Czech folksongs, and \sphinxcode{\sphinxupquote{han1.abc}} contains Chinese folksongs.

The \sphinxcode{\sphinxupquote{.abc}} file ending refers to the ABC notation for encoding melodies. You find more information about the ABC encoding here: \sphinxurl{http://abcnotation.com/}

For example, a song could be encoded like this:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{example\PYGZus{}song} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+s2}{X:1}
\PYG{l+s+s2}{T:Speed the Plough}
\PYG{l+s+s2}{M:4/4}
\PYG{l+s+s2}{C:Trad.}
\PYG{l+s+s2}{K:G}
\PYG{l+s+s2}{|:GABc dedB|dedB dedB|c2ec B2dB|c2A2 A2BA|}
\PYG{l+s+s2}{  GABc dedB|dedB dedB|c2ec B2dB|A2F2 G4:|}
\PYG{l+s+s2}{|:g2gf gdBd|g2f2 e2d2|c2ec B2dB|c2A2 A2df|}
\PYG{l+s+s2}{  g2gf g2Bd|g2f2 e2d2|c2ec B2dB|A2F2 G4:|}
\PYG{l+s+s2}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\end{sphinxVerbatim}
}

The tripple quotes (\sphinxcode{\sphinxupquote{"""}}) surrounding the ABC notation are used by Python to store multi\sphinxhyphen{}line text.

What can we already understand from this encoding?

\sphinxcode{\sphinxupquote{music21}} can load this string and display a graphical output of the score. This is done by a \sphinxstylestrong{parser}. A parser is a program that reads a file and produces a structured output.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{parsed\PYGZus{}example\PYGZus{}song} \PYG{o}{=} \PYG{n}{m21}\PYG{o}{.}\PYG{n}{converter}\PYG{o}{.}\PYG{n}{parse}\PYG{p}{(}\PYG{n}{example\PYGZus{}song}\PYG{p}{)}
\end{sphinxVerbatim}
}

We did not need to give it the entire string again because we have already saved it in the \sphinxcode{\sphinxupquote{example\_song}} variable. The purpose of variables is that you can refer to them later in your code without explicitly needing to state its value.

Calling the variable \sphinxcode{\sphinxupquote{parsed\_example\_song}} now, however, does not really help us here…

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{parsed\PYGZus{}example\PYGZus{}song}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}<music21.stream.Score 0x235ff1e0730>
\end{sphinxVerbatim}
}

It returns a somewhat cryptic statement that says that the variable countains a \sphinxcode{\sphinxupquote{music21.stream.Score}} object. Understanding the internal organization of \sphinxcode{\sphinxupquote{music21}} goes beyond this class. For us, it is suffient to know that these objects have certain associated functions, called \sphinxstylestrong{methods}, that we can use on them. To look at the score of this example song, we use the method \sphinxcode{\sphinxupquote{.show()}}.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{parsed\PYGZus{}example\PYGZus{}song}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=753\sphinxpxdimen,height=416\sphinxpxdimen]{{03_melody_I_21_0}.png}

\end{nbsphinxfancyoutput}

Voilà, this is much better! Now, let us compare the score output to the ABC encoding of the song:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{example\PYGZus{}song}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]

X:1
T:Speed the Plough
M:4/4
C:Trad.
K:G
|:GABc dedB|dedB dedB|c2ec B2dB|c2A2 A2BA|
  GABc dedB|dedB dedB|c2ec B2dB|A2F2 G4:|
|:g2gf gdBd|g2f2 e2d2|c2ec B2dB|c2A2 A2df|
  g2gf g2Bd|g2f2 e2d2|c2ec B2dB|A2F2 G4:|

\end{sphinxVerbatim}
}

Now the ABC notation makes already more sense. \sphinxcode{\sphinxupquote{T:Speed the Ploug}} stands for the title, \sphinxcode{\sphinxupquote{M:4/4}} for the meter, and \sphinxcode{\sphinxupquote{K:G}} for the key of the song. The \sphinxhref{http://abcnotation.com/blog/2010/01/31/how-to-understand-abc-the-basics/}{ABC documentation} tells us that \sphinxcode{\sphinxupquote{X:1}} encodes just a reference number, in case multiple pieces are stored in the same file (as in our case in the variable \sphinxcode{\sphinxupquote{corpora}}, remember?). And the lines at the bottom encode the proper melody, where the letters represent
note names that are organized into bars with or without repetition signs.

\sphinxcode{\sphinxupquote{music21}} even gives us the option to listen to the song if we path the \sphinxcode{\sphinxupquote{midi}} argument to the \sphinxcode{\sphinxupquote{.show()}} method:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{parsed\PYGZus{}example\PYGZus{}song}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{midi}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
<IPython.core.display.HTML object>
\end{sphinxVerbatim}
}

Now, what happens if we try to parse one of the corpora in the EFC? We can select a specific corpus by its \sphinxstylestrong{index} in the list. Python starts counting at 0, so the first file in the list corresponds to

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{corpora}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}WindowsPath('C:/Users/fabianmoss/anaconda3/Lib/site-packages/music21/corpus/essenFolksong/altdeu10.abc')
\end{sphinxVerbatim}
}

As you can see, this is just the first file path in the variable \sphinxcode{\sphinxupquote{corpora}}. Let’s try to parse it!

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{first\PYGZus{}corpus} \PYG{o}{=} \PYG{n}{m21}\PYG{o}{.}\PYG{n}{converter}\PYG{o}{.}\PYG{n}{parse}\PYG{p}{(}\PYG{n}{corpora}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}
}

Looking at the new variable \sphinxcode{\sphinxupquote{first\_corpus}} shows a difference to the example song before; we don’t have a \sphinxcode{\sphinxupquote{music21.stream.Score}} object but a \sphinxcode{\sphinxupquote{music21.stream.Opus}} object.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{first\PYGZus{}corpus}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}<music21.stream.Opus 0x235ff39ad60>
\end{sphinxVerbatim}
}

If we would call the \sphinxcode{\sphinxupquote{.show()}} method on \sphinxcode{\sphinxupquote{first\_corpus}}, we would see the scores of all pieces that are in this particular corpus. But we don’t know how many these are. It there are only three songs, it would not be a problem, but if there were thousands of songs, it could take a very long time to parse and display them all. Fortunately, all pieces in the collection have the \sphinxcode{\sphinxupquote{X:n}} line that we saw above, so that we can directly reference them. With which number would we have to replace
\sphinxcode{\sphinxupquote{n}} if we wanted to look at the 7tst piece? Remember that Python starts counting at 0.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[17]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{first\PYGZus{}corpus}\PYG{p}{[}\PYG{l+m+mi}{70}\PYG{p}{]}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=753\sphinxpxdimen,height=286\sphinxpxdimen]{{03_melody_I_34_0}.png}

\end{nbsphinxfancyoutput}

A A B A’

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{first\PYGZus{}corpus}\PYG{p}{[}\PYG{l+m+mi}{70}\PYG{p}{]}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{midi}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
<IPython.core.display.HTML object>
\end{sphinxVerbatim}
}

We have seen that we can select items from lists by \sphinxstylestrong{indexing} them, \sphinxcode{\sphinxupquote{list{[}i{]}}}. We can get ranges of lists by using the \sphinxcode{\sphinxupquote{:}} character. For example, \sphinxcode{\sphinxupquote{list{[}:10{]}}} shows the first ten elements, \sphinxcode{\sphinxupquote{list{[}10:{]}}} shows everything after the ninth element, and \sphinxcode{\sphinxupquote{list{[}3:6{]}}} shows elements 3, 4, and 5 (not 6!) of the list.


\section{Comparing songs}
\label{\detokenize{03_melody_I:Comparing-songs}}
Looking at individual songs is interesting for music analysis but for that the computational approach is not really necessary. We could as easily do the same by just looking at a book of scores. The power of computational methods becomes clearer when we start comparing different songs, potentially in a large number.

To facilitate this comparison, we will first load all songs in all corpora of the EFC into a single list, called \sphinxcode{\sphinxupquote{songs}} (this might take a couple of minutes).

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[19]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{songs} \PYG{o}{=} \PYG{p}{[}\PYG{n}{s} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{corpora}\PYG{p}{)}\PYG{p}{)} \PYG{k}{for} \PYG{n}{s} \PYG{o+ow}{in} \PYG{n}{m21}\PYG{o}{.}\PYG{n}{converter}\PYG{o}{.}\PYG{n}{parse}\PYG{p}{(}\PYG{n}{corpora}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{)} \PYG{p}{]}
\end{sphinxVerbatim}
}

This looks a bit complicated but all it does is to go through all corpora and extract all songs into a new list. The way we did it is called \sphinxstylestrong{list comprehension} in Python. It is not important if you don’t understand this now but feel free to look it up!

Using the \sphinxcode{\sphinxupquote{len()}} function again, we see how many songs we have in total.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[20]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{songs}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[20]:\,\hspace{\fboxrule}\hspace{\fboxsep}}8514
\end{sphinxVerbatim}
}

We can now use the list \sphinxcode{\sphinxupquote{songs}} to compare two different songs. Again, we load the 71st song of the first corpus and store it now in a variable \sphinxcode{\sphinxupquote{german\_song}}, and we load chinese song with index 6200 into the variable \sphinxcode{\sphinxupquote{chinese\_song}}.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{german\PYGZus{}song} \PYG{o}{=} \PYG{n}{songs}\PYG{p}{[}\PYG{l+m+mi}{70}\PYG{p}{]}
\PYG{n}{chinese\PYGZus{}song} \PYG{o}{=} \PYG{n}{songs}\PYG{p}{[}\PYG{l+m+mi}{6200}\PYG{p}{]}
\end{sphinxVerbatim}
}

It is easy to display these songs now:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{german\PYGZus{}song}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=753\sphinxpxdimen,height=286\sphinxpxdimen]{{03_melody_I_47_0}.png}

\end{nbsphinxfancyoutput}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[23]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{chinese\PYGZus{}song}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=753\sphinxpxdimen,height=286\sphinxpxdimen]{{03_melody_I_48_0}.png}

\end{nbsphinxfancyoutput}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[24]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{chinese\PYGZus{}song}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{midi}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
<IPython.core.display.HTML object>
\end{sphinxVerbatim}
}

Analysis of songs…


\section{Computational analysis}
\label{\detokenize{03_melody_I:Computational-analysis}}
We now go on to a computational analysis of these two and all the other songs. Specifically, we wil compare their \sphinxstylestrong{melodic profiles}. To make things a bit simpler, we will just look at the notes.

A note can be easily represented as a pair of \sphinxstylestrong{pitch} (its height) and its \sphinxstylestrong{duration}. For example, the first note of the \sphinxstyleemphasis{Die plappernden Junggesellen} could be represented as \sphinxcode{\sphinxupquote{(D4, 1/4)}}; it is a quarter note on the pitch D4 (the 4 indicates the octave in which the note is).

Another way to represent the pitch of notes is using \sphinxstylestrong{MIDI numbers}. MIDI stands for \sphinxstyleemphasis{Musical Instrument Digital Interface} and was developed for the communication between different electronic instruments such as keyboards. In MIDI, each note is simply associated with a number:

\sphinxincludegraphics[width=2167\sphinxpxdimen,height=465\sphinxpxdimen]{{midi_pitch}.png} \sphinxstyleemphasis{Image from https://www.audiolabs\sphinxhyphen{}erlangen.de/resources/MIR/FMP/C1/C1S2\_MIDI.html.}

We can see that D4 is associated with the number 62. The second note, the G4, is associated with 62+5=67 because G is five semitones above D.

To make it easier to work with pieces in this way, we define a \sphinxstylestrong{function} that gives us a list of notes for each piece.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[25]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k}{def} \PYG{n+nf}{notelist}\PYG{p}{(}\PYG{n}{piece}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{    This function takes a song as input and returns a list of (pitch, duration) pairs,}
\PYG{l+s+sd}{    where the duration is given in quarter notes.}
\PYG{l+s+sd}{    \PYGZdq{}\PYGZdq{}\PYGZdq{}}

    \PYG{n}{df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{p}{[} \PYG{p}{(}\PYG{n}{note}\PYG{o}{.}\PYG{n}{pitch}\PYG{o}{.}\PYG{n}{midi}\PYG{p}{,} \PYG{n}{note}\PYG{o}{.}\PYG{n}{quarterLength}\PYG{p}{)} \PYG{k}{for} \PYG{n}{note} \PYG{o+ow}{in} \PYG{n}{piece}\PYG{o}{.}\PYG{n}{flat}\PYG{o}{.}\PYG{n}{notes} \PYG{p}{]}\PYG{p}{,} \PYG{n}{columns}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Duration}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Duration}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{cumsum}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{return} \PYG{n}{df}
\end{sphinxVerbatim}
}

Note that the duration of a note is given in quarter notes, i.e. a quarter note has a duration of 1, a half note has a duration of 2, and an eighth note has a duration of 0.5.

Let’s display the first phrase (the first eight notes) of the German song:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[27]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{german\PYGZus{}song}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{l+m+mi}{8}\PYG{p}{]}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[27]:\,\hspace{\fboxrule}\hspace{\fboxsep}}   MIDI Pitch  Duration  Onset
0          62       1.0    1.0
1          67       2.0    3.0
2          71       2.0    5.0
3          74       3.0    8.0
4          72       1.0    9.0
5          71       2.0   11.0
6          69       2.0   13.0
7          67       2.0   15.0
\end{sphinxVerbatim}
}

Note that we added another column, “Onset”. What does it represent?

This allows us now to look at the \sphinxstylestrong{melodic profile} of a particular song.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[28]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k}{def} \PYG{n+nf}{plot\PYGZus{}melodic\PYGZus{}profile}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{,} \PYG{n}{ax}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{,} \PYG{n}{mean}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{Z}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{sections}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{standardized}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{)}\PYG{p}{:}

    \PYG{k}{if} \PYG{n}{ax} \PYG{o}{==} \PYG{k+kc}{None}\PYG{p}{:}
        \PYG{n}{ax} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{gca}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{if} \PYG{n}{standardized}\PYG{p}{:}
        \PYG{n}{x} \PYG{o}{=} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
        \PYG{n}{y} \PYG{o}{=} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
    \PYG{k}{else}\PYG{p}{:}
        \PYG{n}{x} \PYG{o}{=} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
        \PYG{n}{y} \PYG{o}{=} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}

    \PYG{n}{ax}\PYG{o}{.}\PYG{n}{step}\PYG{p}{(}\PYG{n}{x}\PYG{p}{,}\PYG{n}{y}\PYG{p}{,} \PYG{n}{color}\PYG{o}{=}\PYG{n}{c}\PYG{p}{)}

    \PYG{k}{if} \PYG{n}{mean}\PYG{p}{:}
        \PYG{n}{ax}\PYG{o}{.}\PYG{n}{axhline}\PYG{p}{(}\PYG{n}{y}\PYG{o}{.}\PYG{n}{mean}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{color}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gray}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{linestyle}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

    \PYG{k}{if} \PYG{n}{sections}\PYG{p}{:}
        \PYG{k}{for} \PYG{n}{l} \PYG{o+ow}{in} \PYG{p}{[} \PYG{n}{x}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)} \PYG{o}{*} \PYG{n}{i} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{p}{[} \PYG{l+m+mi}{1}\PYG{o}{/}\PYG{l+m+mi}{4}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{o}{/}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{3}\PYG{o}{/}\PYG{l+m+mi}{4}\PYG{p}{]} \PYG{p}{]}\PYG{p}{:}
            \PYG{n}{ax}\PYG{o}{.}\PYG{n}{axvline}\PYG{p}{(}\PYG{n}{l}\PYG{p}{,} \PYG{n}{color}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gray}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{linewidth}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{linestyle}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[29]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{plot\PYGZus{}melodic\PYGZus{}profile}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{german\PYGZus{}song}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=372\sphinxpxdimen,height=251\sphinxpxdimen]{{03_melody_I_60_0}.png}

\end{nbsphinxfancyoutput}

Likewise, we can as easily plot the melodic contour of the Chinese song (we will use a different color).

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[30]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{fig}\PYG{p}{,} \PYG{n}{axes} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{,}\PYG{l+m+mi}{6}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{plot\PYGZus{}melodic\PYGZus{}profile}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{german\PYGZus{}song}\PYG{p}{)}\PYG{p}{,} \PYG{n}{ax}\PYG{o}{=}\PYG{n}{axes}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{mean}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\PYG{n}{plot\PYGZus{}melodic\PYGZus{}profile}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{chinese\PYGZus{}song}\PYG{p}{)}\PYG{p}{,} \PYG{n}{ax}\PYG{o}{=}\PYG{n}{axes}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{firebrick}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{mean}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}

\PYG{n}{plt}\PYG{o}{.}\PYG{n}{tight\PYGZus{}layout}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{savefig}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{img/melodic\PYGZus{}profiles.png}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=574\sphinxpxdimen,height=420\sphinxpxdimen]{{03_melody_I_62_0}.png}

\end{nbsphinxfancyoutput}

The dashed grey lines in both plots show the average MIDI pitch of the song.

But still, it is quite difficult to compare them directly. They differ both with respect to their length (see the numbers on the “Onset” axis) and their pitches (see “MIDI Pitch” axis).

We need to transform them in a way that makes them directly comparable. To that end, we define a new function \sphinxcode{\sphinxupquote{standardize()}}.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[31]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k}{def} \PYG{n+nf}{standardize}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{)}\PYG{p}{:}
    \PYG{l+s+sd}{\PYGZdq{}\PYGZdq{}\PYGZdq{}}
\PYG{l+s+sd}{    Takes a notelist as input and returns a standardized version.}
\PYG{l+s+sd}{    \PYGZdq{}\PYGZdq{}\PYGZdq{}}

    \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{(}\PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{mean}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)} \PYG{o}{/} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{std}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. Duration}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Duration}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{/} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Duration}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{sum}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{/} \PYG{n}{notelist}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)}

    \PYG{k}{return} \PYG{n}{notelist}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[33]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{standardize}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{german\PYGZus{}song}\PYG{p}{)}\PYG{p}{)}\PYG{p}{[}\PYG{p}{:}\PYG{l+m+mi}{8}\PYG{p}{]}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[33]:\,\hspace{\fboxrule}\hspace{\fboxsep}}   MIDI Pitch  Duration  Onset  Rel. MIDI Pitch  Rel. Duration  Rel. Onset
0          62       1.0    1.0        -2.543827       0.016667    0.016667
1          67       2.0    3.0        -0.949300       0.033333    0.050000
2          71       2.0    5.0         0.326322       0.033333    0.083333
3          74       3.0    8.0         1.283038       0.050000    0.133333
4          72       1.0    9.0         0.645227       0.016667    0.150000
5          71       2.0   11.0         0.326322       0.033333    0.183333
6          69       2.0   13.0        -0.311489       0.033333    0.216667
7          67       2.0   15.0        -0.949300       0.033333    0.250000
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[34]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{plot\PYGZus{}melodic\PYGZus{}profile}\PYG{p}{(}\PYG{n}{standardize}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{german\PYGZus{}song}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{n}{mean}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{sections}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{standardized}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\PYG{n}{plot\PYGZus{}melodic\PYGZus{}profile}\PYG{p}{(}\PYG{n}{standardize}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{chinese\PYGZus{}song}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{firebrick}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{standardized}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=374\sphinxpxdimen,height=251\sphinxpxdimen]{{03_melody_I_66_0}.png}

\end{nbsphinxfancyoutput}

Standardizing the songs makes it possible to compare them directly: They have now the same length 1 and their pitches are centered around the mean 0 with a standard deviation of 1.

However, already with two pieces this plot is quite crowded.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{dfs} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}

\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{song} \PYG{o+ow}{in} \PYG{n+nb}{enumerate}\PYG{p}{(}\PYG{n}{songs}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{df} \PYG{o}{=} \PYG{n}{standardize}\PYG{p}{(}\PYG{n}{notelist}\PYG{p}{(}\PYG{n}{song}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{i}
    \PYG{n}{dfs}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{df}\PYG{p}{)}

\PYG{n}{big\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{concat}\PYG{p}{(}\PYG{n}{dfs}\PYG{p}{)}\PYG{o}{.}\PYG{n}{reset\PYGZus{}index}\PYG{p}{(}\PYG{n}{drop}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{to\PYGZus{}csv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data/big\PYGZus{}df.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{sample}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}
\end{sphinxVerbatim}
}


\section{The melodic arc}
\label{\detokenize{03_melody_I:The-melodic-arc}}
{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{o}{\PYGZpc{}\PYGZpc{}time}

\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{grouped} \PYG{o}{=} \PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{g} \PYG{o+ow}{in} \PYG{n}{grouped}\PYG{p}{:}
    \PYG{n}{x} \PYG{o}{=} \PYG{n}{g}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
    \PYG{n}{y} \PYG{o}{=} \PYG{n}{g}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
    \PYG{n}{ax}\PYG{o}{.}\PYG{n}{plot}\PYG{p}{(}\PYG{n}{x}\PYG{p}{,}\PYG{n}{y}\PYG{p}{,} \PYG{n}{lw}\PYG{o}{=}\PYG{o}{.}\PYG{l+m+mi}{5}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tab:red}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{alpha}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{o}{/}\PYG{l+m+mi}{300}\PYG{p}{)}

\PYG{n}{ax}\PYG{o}{.}\PYG{n}{axvline}\PYG{p}{(}\PYG{o}{.}\PYG{l+m+mi}{25}\PYG{p}{,} \PYG{n}{lw}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{ls}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gray}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{ax}\PYG{o}{.}\PYG{n}{axvline}\PYG{p}{(}\PYG{o}{.}\PYG{l+m+mi}{5}\PYG{p}{,} \PYG{n}{lw}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{ls}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gray}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{ax}\PYG{o}{.}\PYG{n}{axvline}\PYG{p}{(}\PYG{o}{.}\PYG{l+m+mi}{75}\PYG{p}{,} \PYG{n}{lw}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{ls}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gray}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{ax}\PYG{o}{.}\PYG{n}{axhline}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{lw}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{ls}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gray}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{n}{lowess} \PYG{o}{=} \PYG{n}{sm}\PYG{o}{.}\PYG{n}{nonparametric}\PYG{o}{.}\PYG{n}{lowess}
\PYG{n}{big\PYGZus{}x} \PYG{o}{=} \PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. Onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
\PYG{n}{big\PYGZus{}y} \PYG{o}{=} \PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Rel. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
\PYG{n}{big\PYGZus{}z} \PYG{o}{=} \PYG{n}{lowess}\PYG{p}{(}\PYG{n}{big\PYGZus{}y}\PYG{p}{,} \PYG{n}{big\PYGZus{}x}\PYG{p}{,} \PYG{n}{frac}\PYG{o}{=}\PYG{l+m+mi}{5}\PYG{o}{/}\PYG{l+m+mi}{100}\PYG{p}{,} \PYG{n}{delta}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{o}{/}\PYG{l+m+mi}{20}\PYG{p}{)}
\PYG{n}{ax}\PYG{o}{.}\PYG{n}{plot}\PYG{p}{(}\PYG{n}{big\PYGZus{}z}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,} \PYG{n}{big\PYGZus{}z}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{,} \PYG{n}{c}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{black}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lw}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{)}

\PYG{n}{plt}\PYG{o}{.}\PYG{n}{title}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Melodic arc}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{xlabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Relative onset}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{ylabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Pitch deviation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{xticks}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{linspace}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{yticks}\PYG{p}{(}\PYG{n}{np}\PYG{o}{.}\PYG{n}{linspace}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{11}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{xlim}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}

\PYG{n}{plt}\PYG{o}{.}\PYG{n}{tight\PYGZus{}layout}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{savefig}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{img/melodic\PYGZus{}arc.png}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}


\section{Intervals}
\label{\detokenize{03_melody_I:Intervals}}
We have seen that the melodic arc emerges as a stable shape over the entire EFC, and that sub\sphinxhyphen{}phrases of the songs likewise have an arc\sphinxhyphen{}like shape. In the remainder of this section, we look at \sphinxstylestrong{intervals}, the distance between two notes.

Let’s come back to the song \sphinxstyleemphasis{Die plappernden Junggesellen}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{german\PYGZus{}song}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

We have already extracted its notes and stored them in a DataFrame:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{70}\PYG{p}{]}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{)}
\end{sphinxVerbatim}
}

The code above reads as “Select all rows in \sphinxcode{\sphinxupquote{big\_df}} for which the column \sphinxcode{\sphinxupquote{Song ID}} is equal to 70”. The \sphinxcode{\sphinxupquote{.head()}} method displays the first 5 rows by default but you can specify the number of rows you want to be displayed (here 8).

Focusing on the “MIDI Pitch” column, the notes in the first phrase have MIDI pitch 62, 67, 71, 74, 72. Since intervals correspond to the difference between notes, the intervals for the beginning of this song are:
\begin{itemize}
\item {} 
+5 (67\sphinxhyphen{}62)

\item {} 
+4 (71\sphinxhyphen{}67)

\item {} 
+3 (74\sphinxhyphen{}71)

\item {} 
\sphinxhyphen{}2 (72\sphinxhyphen{}74)

\item {} 
\sphinxhyphen{}1 (71\sphinxhyphen{}72)

\item {} 
\sphinxhyphen{}2 (69\sphinxhyphen{}71)

\item {} 
\sphinxhyphen{}2 (67\sphinxhyphen{}69)

\end{itemize}

The sequence of intervals in this phrase is thus \sphinxcode{\sphinxupquote{{[}+5, +4, +3, \sphinxhyphen{}2, \sphinxhyphen{}1, \sphinxhyphen{}2, \sphinxhyphen{}2{]}}}. The signs (+ or \sphinxhyphen{}) also reflect the arc\sphinxhyphen{}like shape of this first phrase, but the sizes of the intervals are not perfecly balanced. Note that \sphinxcode{\sphinxupquote{\sphinxhyphen{}2}} (two descending semitones, or one descending whole tone) is the most frequent interval.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{all\PYGZus{}ints} \PYG{o}{=} \PYG{p}{[} \PYG{n}{p2} \PYG{o}{\PYGZhy{}} \PYG{n}{p1} \PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{g} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{for} \PYG{n}{p1}\PYG{p}{,} \PYG{n}{p2} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{g}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{g}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{p}{]}\PYG{p}{)} \PYG{p}{]}
\PYG{n}{min\PYGZus{}int} \PYG{o}{=} \PYG{n+nb}{min}\PYG{p}{(}\PYG{n}{all\PYGZus{}ints}\PYG{p}{)}
\PYG{n}{max\PYGZus{}int} \PYG{o}{=} \PYG{n+nb}{max}\PYG{p}{(}\PYG{n}{all\PYGZus{}ints}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{min\PYGZus{}int}\PYG{p}{,} \PYG{n}{max\PYGZus{}int}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{len}\PYG{p}{(}\PYG{n}{all\PYGZus{}ints}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ints\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{index}\PYG{o}{=}\PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{n}{min\PYGZus{}int}\PYG{p}{,}\PYG{n}{max\PYGZus{}int}\PYG{p}{)}\PYG{p}{,} \PYG{n}{columns}\PYG{o}{=}\PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{n}{min\PYGZus{}int}\PYG{p}{,}\PYG{n}{max\PYGZus{}int}\PYG{o}{+}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{)}

\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{g} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{intervals} \PYG{o}{=} \PYG{p}{[} \PYG{n}{p2} \PYG{o}{\PYGZhy{}} \PYG{n}{p1} \PYG{k}{for} \PYG{n}{p1}\PYG{p}{,} \PYG{n}{p2} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{g}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{g}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{p}{]}\PYG{p}{)}\PYG{p}{]}

    \PYG{k}{for} \PYG{n}{i1}\PYG{p}{,} \PYG{n}{i2} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{intervals}\PYG{p}{,} \PYG{n}{intervals}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{ints\PYGZus{}df}\PYG{o}{.}\PYG{n}{loc}\PYG{p}{[}\PYG{n}{i1}\PYG{p}{,}\PYG{n}{i2}\PYG{p}{]} \PYG{o}{+}\PYG{o}{=} \PYG{l+m+mi}{1}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ints\PYGZus{}df}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{sns}\PYG{o}{.}\PYG{n}{heatmap}\PYG{p}{(}\PYG{n}{ints\PYGZus{}df}\PYG{o}{.}\PYG{n}{loc}\PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{12}\PYG{p}{:}\PYG{l+m+mi}{13}\PYG{p}{,}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{12}\PYG{p}{:}\PYG{l+m+mi}{13}\PYG{p}{]}\PYG{p}{,} \PYG{n}{cmap}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coolwarm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{square}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{linewidths}\PYG{o}{=}\PYG{l+m+mf}{0.01}\PYG{p}{,}\PYG{n}{ax}\PYG{o}{=}\PYG{n}{ax}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

The two most common interval pairs are \sphinxcode{\sphinxupquote{(0,0)}} and \sphinxcode{\sphinxupquote{(\sphinxhyphen{}2,\sphinxhyphen{}2)}}. A much less frequent pair of intervals is \sphinxcode{\sphinxupquote{(5,0)}}, but this is still much more frequent than, for example, \sphinxcode{\sphinxupquote{(9,9)}}.

To which melodic fragments do these correspond?

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Avg. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{0}

\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{group} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{grp\PYGZus{}mean\PYGZus{}pitch} \PYG{o}{=} \PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{group}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{mean}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{loc}\PYG{p}{[}\PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{==} \PYG{n}{i}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Avg. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{grp\PYGZus{}mean\PYGZus{}pitch}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shifted\PYGZus{}pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{\PYGZhy{}} \PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Avg. MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{tail}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{idx} \PYG{o}{=} \PYG{n}{np}\PYG{o}{.}\PYG{n}{arange}\PYG{p}{(}\PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shifted\PYGZus{}pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{min}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{big\PYGZus{}df}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shifted\PYGZus{}pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)} \PYG{o}{+} \PYG{l+m+mi}{1}\PYG{p}{)}
\PYG{n}{idx}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{transitions\PYGZus{}df} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{DataFrame}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{index}\PYG{o}{=}\PYG{n}{idx}\PYG{p}{,} \PYG{n}{columns}\PYG{o}{=}\PYG{n}{idx}\PYG{p}{)}
\PYG{n}{transitions\PYGZus{}df}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{o}{\PYGZpc{}\PYGZpc{}time}

\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{group} \PYG{o+ow}{in} \PYG{n}{big\PYGZus{}df}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Song ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{bg} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{group}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shifted\PYGZus{}pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{group}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shifted\PYGZus{}pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{:}\PYG{p}{]}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{transitions\PYGZus{}df}\PYG{o}{.}\PYG{n}{loc}\PYG{p}{[}\PYG{n}{bg}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{,}\PYG{n}{bg}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{]} \PYG{o}{+}\PYG{o}{=}\PYG{l+m+mi}{1}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{There are }\PYG{l+s+si}{\PYGZob{}}\PYG{n}{transitions\PYGZus{}df}\PYG{o}{.}\PYG{n}{sum}\PYG{p}{(}\PYG{p}{)}\PYG{o}{.}\PYG{n}{sum}\PYG{p}{(}\PYG{p}{)}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{ intervals in total in the corpus.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{)}

\PYG{n}{g} \PYG{o}{=} \PYG{n}{sns}\PYG{o}{.}\PYG{n}{heatmap}\PYG{p}{(}\PYG{n}{transitions\PYGZus{}df}\PYG{p}{,} \PYG{n}{cmap}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coolwarm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{linewidths}\PYG{o}{=}\PYG{o}{.}\PYG{l+m+mi}{01}\PYG{p}{,} \PYG{n}{square}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{ylabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{First interval}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{xlabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Second interval}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}
\end{sphinxVerbatim}
}


\chapter{Solos in the \sphinxstyleemphasis{Weimar Jazz Database}}
\label{\detokenize{04_jazz_solos:Solos-in-the-Weimar-Jazz-Database}}\label{\detokenize{04_jazz_solos::doc}}
\sphinxstylestrong{Disclaimer: I am not the expert here!}

The first project we will have a look at is the \sphinxhref{https://jazzomat.hfm-weimar.de/}{Jazzomat Research Project} that contains the \sphinxstyleemphasis{Weimar Jazz Database} (WJazzD). Let us first browse the site.

Transcriptions of Jazz solos :cite:\sphinxcode{\sphinxupquote{Pfleiderer2017}}. The \sphinxstyleemphasis{Weimar Jazz Database} (WJD) consists of 456 transcriptions of Jazz solos from diverse substyles. As all the corpora that we deal with here, it is freely available on the internet.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{pandas} \PYG{k}{as} \PYG{n+nn}{pd}
\PYG{k+kn}{import} \PYG{n+nn}{sqlite3}

\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{seaborn} \PYG{k}{as} \PYG{n+nn}{sns}
\PYG{n}{sns}\PYG{o}{.}\PYG{n}{set\PYGZus{}style}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{white}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{sns}\PYG{o}{.}\PYG{n}{set\PYGZus{}context}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{talk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

The WJazzD was already downloaded; we connect to the database with the help of \sphinxcode{\sphinxupquote{sqlite3}}.

The database contains a number of tables:

…

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{conn} \PYG{o}{=} \PYG{n}{sqlite3}\PYG{o}{.}\PYG{n}{connect}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data/wjazzd.db}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{conn}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}<sqlite3.Connection at 0x171358b85d0>
\end{sphinxVerbatim}
}

We can now use \sphinxcode{\sphinxupquote{pandas}} to read the data out of the database.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}sql}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * FROM melody}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{con}\PYG{o}{=}\PYG{n}{conn}\PYG{p}{)}
\end{sphinxVerbatim}
}

The \sphinxcode{\sphinxupquote{"SELECT * FROM melody"}} means “Select everything from the table ‘melody’ in the database”. Let’s look at the first ten entries. Likewise, we can select the \sphinxcode{\sphinxupquote{composition\_info}} table:

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos\PYGZus{}meta} \PYG{o}{=} \PYG{n}{pd}\PYG{o}{.}\PYG{n}{read\PYGZus{}sql}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SELECT * from solo\PYGZus{}info}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{con}\PYG{o}{=}\PYG{n}{conn}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos\PYGZus{}meta}\PYG{o}{.}\PYG{n}{sample}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}     melid  trackid  compid  recordid          performer  \textbackslash{}
405    406      224     202       116      Steve Coleman
57      58       53      53        24     Charlie Parker
430    431      329     289       177      Wayne Shorter
269    270      233     210       119         Lee Konitz
151    152      136     123        67          Don Ellis
394    395      310     275        86        Sonny Stitt
203    204      181     164        90      Joe Henderson
300    301      249     225       130    Michael Brecker
42      43       38      38        15  Branford Marsalis
351    352      285     255       151       Paul Desmond

                          title titleaddon  solopart instrument    style  \textbackslash{}
405                  Pass It On                    1         as   FUSION
57                   K.C. Blues                    1         as    BEBOP
430                  Footprints                    1         ts  POSTBOP
269                 Marshmallow                    1         as     COOL
151  You Stepped Out of a Dream                    2         tp  POSTBOP
394                   Good Kick                    1         as    BEBOP
203                  Totem Pole                    1         ts  POSTBOP
300            Delta City Blues                    1         ts  POSTBOP
42                     U.M.M.G.                    1         ts  POSTBOP
351               Samba Cantina                    2         as     COOL

     avgtempo   tempoclass rhythmfeel     key signature  \textbackslash{}
405     104.9  MEDIUM SLOW       FUNK               4/4
57      118.3       MEDIUM      SWING   C-maj       4/4
430     136.1       MEDIUM      SWING   C-min       6/4
269     298.6           UP      SWING  Bb-maj       4/4
151     168.9    MEDIUM UP      SWING   D-maj       4/4
394     173.4    MEDIUM UP      SWING   F-maj       4/4
203     137.6       MEDIUM      SWING  Eb-min       4/4
300     281.7           UP      SWING  Bb-maj       4/4
42      211.6           UP      SWING  Db-maj       4/4
351     152.7    MEDIUM UP      LATIN   F-min       4/4

                                         chord\_changes  chorus\_count
405  A1: ||C-7   |Eb   |C-7   |Eb   ||\textbackslash{}nA2: ||C-7  {\ldots}             2
57   A1: ||C7   |F7   |C7   |C7   |F7   |F7   |C7  {\ldots}             2
430  A1: ||C-7     |C-7     |C-7     |C-7     |F-7 {\ldots}             4
269  A1: ||Bbj7   |Bbj7   |F-7   |Bb7   |Ebj7   |Eb{\ldots}             1
151  A1: ||Dj7   |Dj7   |Ebj7   |Ebj7   |F7   |F7  {\ldots}             1
394  A1: ||F7   |F7   |F7 D-7 |G-7 C7 |F7   |F7   |{\ldots}             3
203  A1: ||Eb-79   |Eb-79   |F7   |F7   |E7   |E7  {\ldots}             2
300  A1: ||Bb7   |Bb7   |Bb7   |Bb7   |Bb7   |Bb7  {\ldots}             4
42   A1: ||Fm7b5   |Bb79b   |Eb-7   |Ab7   |Dbo7 Db{\ldots}             6
351  A1: ||Gm7b5   |C79b   |F-7   |F-7   |Bb-7   |E{\ldots}             1
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}   eventid  melid      onset  pitch  duration  period  division  bar  beat  \textbackslash{}
0        1      1  10.343492   65.0  0.138776       4         1    0     1
1        2      1  10.637642   63.0  0.171247       4         4    0     2
2        3      1  10.843719   58.0  0.081270       4         4    0     2
3        4      1  10.948209   61.0  0.235102       4         1    0     3
4        5      1  11.232653   63.0  0.130612       4         1    0     4
5        6      1  11.551927   58.0  0.188662       4         1    1     1
6        7      1  11.859592   58.0  0.481814       4         1    1     2
7        8      1  14.535692   50.0  0.159637       4         1    3     3
8        9      1  14.799819   57.0  0.145125       4         2    3     4
9       10      1  14.973968   60.0  0.110295       4         2    3     4

   tatum  {\ldots}   f0\_mod  loud\_max   loud\_med   loud\_sd  loud\_relpos loud\_cent  \textbackslash{}
0      1  {\ldots}           0.126209  66.526087  5.541147     0.307692  0.389466
1      1  {\ldots}           0.349751  69.133321  2.912412     0.250000  0.468687
2      4  {\ldots}           0.094051  66.352130  3.564563     0.428571  0.531354
3      1  {\ldots}           0.521187  66.484173  2.414298     0.818182  0.559333
4      1  {\ldots}           0.560737  71.699054  2.185794     0.166667  0.438973
5      1  {\ldots}           0.534657  67.636708  7.635221     0.411765  0.359536
6      1  {\ldots}  vibrato  0.584914  63.659343  5.518070     0.068182  0.403372
7      1  {\ldots}          -0.129185  58.507975  5.020340     0.133333  0.368384
8      1  {\ldots}           0.599931  71.173670  2.938194     0.285714  0.551884
9      2  {\ldots}           0.484532  69.632891  2.325457     0.600000  0.508617

   loud\_s2b    f0\_range  f0\_freq\_hz  f0\_med\_dev
0  1.056169   37.794261   12.932532   -0.328442
1  1.120317    6.365930    6.956935   11.135423
2  1.310389   68.010392         NaN   32.366787
3  0.984047   15.443906    5.867151   -3.374696
4  1.061262   11.444363    8.329975    6.377737
5  1.049956   39.368720    6.589582   16.146429
6  0.983151   39.429103    5.406750   11.239471
7  0.927912  174.398513         NaN   25.203232
8  1.064195   27.066543    7.758283   25.736430
9  1.038483   17.141304   11.184763   15.693739

[10 rows x 26 columns]
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{o}{.}\PYG{n}{tail}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}        eventid  melid      onset  pitch  duration  period  division  bar  \textbackslash{}
200804   200805    456  63.135057   57.0  0.168345       4         2   53
200805   200806    456  63.303401   55.0  0.087075       4         3   54
200806   200807    456  63.390476   57.0  0.191565       4         3   54
200807   200808    456  63.640091   59.0  0.406349       4         1   54
200808   200809    456  64.058050   52.0  1.433832       4         2   54

        beat  tatum  {\ldots}   f0\_mod  loud\_max   loud\_med   loud\_sd  loud\_relpos  \textbackslash{}
200804     4      2  {\ldots}           1.113380  72.169552  6.896394     0.687500
200805     1      1  {\ldots}           0.491496  69.732265  1.814723     0.500000
200806     1      2  {\ldots}    slide  1.187058  76.628621  2.628726     0.411765
200807     2      1  {\ldots}           0.972676  66.042058  3.690577     0.000000
200808     3      2  {\ldots}  vibrato  0.368321  58.174931  9.418678     0.053030

       loud\_cent  loud\_s2b    f0\_range  f0\_freq\_hz  f0\_med\_dev
200804  0.581956  1.271747  191.074095   10.966972  -11.891698
200805  0.595212  1.339060   40.375449         NaN  -99.173779
200806  0.590950  1.432802  104.823845   11.148561   -2.911604
200807  0.334937  1.082549  165.810976    2.659723   14.311001
200808  0.400571  1.278890   66.932198    2.153916   -9.381310

[5 rows x 26 columns]
\end{sphinxVerbatim}
}

The \sphinxcode{\sphinxupquote{solos}} table contains 26 columns that cannot be displayed at once. We can have a look at all columns by using the \sphinxcode{\sphinxupquote{.columns}} attribute.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{o}{.}\PYG{n}{columns}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}Index(['eventid', 'melid', 'onset', 'pitch', 'duration', 'period', 'division',
       'bar', 'beat', 'tatum', 'subtatum', 'num', 'denom', 'beatprops',
       'beatdur', 'tatumprops', 'f0\_mod', 'loud\_max', 'loud\_med', 'loud\_sd',
       'loud\_relpos', 'loud\_cent', 'loud\_s2b', 'f0\_range', 'f0\_freq\_hz',
       'f0\_med\_dev'],
      dtype='object')
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{mapper} \PYG{o}{=} \PYG{n+nb}{dict}\PYG{p}{(}\PYG{n}{solos\PYGZus{}meta}\PYG{p}{[}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{melid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{performer}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{]}\PYG{o}{.}\PYG{n}{values}\PYG{p}{)}
\PYG{n}{mapper}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\{1: 'Art Pepper',
 2: 'Art Pepper',
 3: 'Art Pepper',
 4: 'Art Pepper',
 5: 'Art Pepper',
 6: 'Art Pepper',
 7: 'Benny Carter',
 8: 'Benny Carter',
 9: 'Benny Carter',
 10: 'Benny Carter',
 11: 'Benny Carter',
 12: 'Benny Carter',
 13: 'Benny Carter',
 14: 'Benny Goodman',
 15: 'Benny Goodman',
 16: 'Benny Goodman',
 17: 'Benny Goodman',
 18: 'Benny Goodman',
 19: 'Benny Goodman',
 20: 'Benny Goodman',
 21: 'Ben Webster',
 22: 'Ben Webster',
 23: 'Ben Webster',
 24: 'Ben Webster',
 25: 'Ben Webster',
 26: 'Bix Beiderbecke',
 27: 'Bix Beiderbecke',
 28: 'Bix Beiderbecke',
 29: 'Bix Beiderbecke',
 30: 'Bix Beiderbecke',
 31: 'Bob Berg',
 32: 'Bob Berg',
 33: 'Bob Berg',
 34: 'Bob Berg',
 35: 'Bob Berg',
 36: 'Bob Berg',
 37: 'Bob Berg',
 38: 'Branford Marsalis',
 39: 'Branford Marsalis',
 40: 'Branford Marsalis',
 41: 'Branford Marsalis',
 42: 'Branford Marsalis',
 43: 'Branford Marsalis',
 44: 'Buck Clayton',
 45: 'Buck Clayton',
 46: 'Buck Clayton',
 47: 'Cannonball Adderley',
 48: 'Cannonball Adderley',
 49: 'Cannonball Adderley',
 50: 'Cannonball Adderley',
 51: 'Cannonball Adderley',
 52: 'Charlie Parker',
 53: 'Charlie Parker',
 54: 'Charlie Parker',
 55: 'Charlie Parker',
 56: 'Charlie Parker',
 57: 'Charlie Parker',
 58: 'Charlie Parker',
 59: 'Charlie Parker',
 60: 'Charlie Parker',
 61: 'Charlie Parker',
 62: 'Charlie Parker',
 63: 'Charlie Parker',
 64: 'Charlie Parker',
 65: 'Charlie Parker',
 66: 'Charlie Parker',
 67: 'Charlie Parker',
 68: 'Charlie Parker',
 69: 'Charlie Shavers',
 70: 'Chet Baker',
 71: 'Chet Baker',
 72: 'Chet Baker',
 73: 'Chet Baker',
 74: 'Chet Baker',
 75: 'Chet Baker',
 76: 'Chet Baker',
 77: 'Chet Baker',
 78: 'Chris Potter',
 79: 'Chris Potter',
 80: 'Chris Potter',
 81: 'Chris Potter',
 82: 'Chris Potter',
 83: 'Chris Potter',
 84: 'Chris Potter',
 85: 'Chu Berry',
 86: 'Chu Berry',
 87: 'Clifford Brown',
 88: 'Clifford Brown',
 89: 'Clifford Brown',
 90: 'Clifford Brown',
 91: 'Clifford Brown',
 92: 'Clifford Brown',
 93: 'Clifford Brown',
 94: 'Clifford Brown',
 95: 'Clifford Brown',
 96: 'Coleman Hawkins',
 97: 'Coleman Hawkins',
 98: 'Coleman Hawkins',
 99: 'Coleman Hawkins',
 100: 'Coleman Hawkins',
 101: 'Coleman Hawkins',
 102: 'Curtis Fuller',
 103: 'Curtis Fuller',
 104: 'David Liebman',
 105: 'David Liebman',
 106: 'David Liebman',
 107: 'David Liebman',
 108: 'David Liebman',
 109: 'David Liebman',
 110: 'David Liebman',
 111: 'David Liebman',
 112: 'David Liebman',
 113: 'David Liebman',
 114: 'David Liebman',
 115: 'David Murray',
 116: 'David Murray',
 117: 'David Murray',
 118: 'David Murray',
 119: 'David Murray',
 120: 'David Murray',
 121: 'Dexter Gordon',
 122: 'Dexter Gordon',
 123: 'Dexter Gordon',
 124: 'Dexter Gordon',
 125: 'Dexter Gordon',
 126: 'Dexter Gordon',
 127: 'Dickie Wells',
 128: 'Dickie Wells',
 129: 'Dickie Wells',
 130: 'Dickie Wells',
 131: 'Dickie Wells',
 132: 'Dickie Wells',
 133: 'Dizzy Gillespie',
 134: 'Dizzy Gillespie',
 135: 'Dizzy Gillespie',
 136: 'Dizzy Gillespie',
 137: 'Dizzy Gillespie',
 138: 'Dizzy Gillespie',
 139: 'Don Byas',
 140: 'Don Byas',
 141: 'Don Byas',
 142: 'Don Byas',
 143: 'Don Byas',
 144: 'Don Byas',
 145: 'Don Byas',
 146: 'Don Byas',
 147: 'Don Ellis',
 148: 'Don Ellis',
 149: 'Don Ellis',
 150: 'Don Ellis',
 151: 'Don Ellis',
 152: 'Don Ellis',
 153: 'Eric Dolphy',
 154: 'Eric Dolphy',
 155: 'Eric Dolphy',
 156: 'Eric Dolphy',
 157: 'Eric Dolphy',
 158: 'Eric Dolphy',
 159: 'Fats Navarro',
 160: 'Fats Navarro',
 161: 'Fats Navarro',
 162: 'Fats Navarro',
 163: 'Fats Navarro',
 164: 'Fats Navarro',
 165: 'Freddie Hubbard',
 166: 'Freddie Hubbard',
 167: 'Freddie Hubbard',
 168: 'Freddie Hubbard',
 169: 'Freddie Hubbard',
 170: 'Freddie Hubbard',
 171: 'George Coleman',
 172: 'Gerry Mulligan',
 173: 'Gerry Mulligan',
 174: 'Gerry Mulligan',
 175: 'Gerry Mulligan',
 176: 'Gerry Mulligan',
 177: 'Gerry Mulligan',
 178: 'Hank Mobley',
 179: 'Hank Mobley',
 180: 'Hank Mobley',
 181: 'Hank Mobley',
 182: 'Harry Edison',
 183: 'Henry Allen',
 184: 'Herbie Hancock',
 185: 'Herbie Hancock',
 186: 'Herbie Hancock',
 187: 'Herbie Hancock',
 188: 'Herbie Hancock',
 189: 'J.C. Higginbotham',
 190: 'J.J. Johnson',
 191: 'J.J. Johnson',
 192: 'J.J. Johnson',
 193: 'J.J. Johnson',
 194: 'J.J. Johnson',
 195: 'J.J. Johnson',
 196: 'J.J. Johnson',
 197: 'J.J. Johnson',
 198: 'Joe Henderson',
 199: 'Joe Henderson',
 200: 'Joe Henderson',
 201: 'Joe Henderson',
 202: 'Joe Henderson',
 203: 'Joe Henderson',
 204: 'Joe Henderson',
 205: 'Joe Henderson',
 206: 'Joe Lovano',
 207: 'Joe Lovano',
 208: 'Joe Lovano',
 209: 'Joe Lovano',
 210: 'Joe Lovano',
 211: 'Joe Lovano',
 212: 'Joe Lovano',
 213: 'Joe Lovano',
 214: 'John Abercrombie',
 215: 'John Coltrane',
 216: 'John Coltrane',
 217: 'John Coltrane',
 218: 'John Coltrane',
 219: 'John Coltrane',
 220: 'John Coltrane',
 221: 'John Coltrane',
 222: 'John Coltrane',
 223: 'John Coltrane',
 224: 'John Coltrane',
 225: 'John Coltrane',
 226: 'John Coltrane',
 227: 'John Coltrane',
 228: 'John Coltrane',
 229: 'John Coltrane',
 230: 'John Coltrane',
 231: 'John Coltrane',
 232: 'John Coltrane',
 233: 'John Coltrane',
 234: 'John Coltrane',
 235: 'Johnny Dodds',
 236: 'Johnny Dodds',
 237: 'Johnny Dodds',
 238: 'Johnny Dodds',
 239: 'Johnny Dodds',
 240: 'Johnny Dodds',
 241: 'Johnny Hodges',
 242: 'Johnny Hodges',
 243: 'Joshua Redman',
 244: 'Joshua Redman',
 245: 'Joshua Redman',
 246: 'Joshua Redman',
 247: 'Joshua Redman',
 248: 'Kai Winding',
 249: 'Kenny Dorham',
 250: 'Kenny Dorham',
 251: 'Kenny Dorham',
 252: 'Kenny Dorham',
 253: 'Kenny Dorham',
 254: 'Kenny Dorham',
 255: 'Kenny Dorham',
 256: 'Kenny Garrett',
 257: 'Kenny Garrett',
 258: 'Kenny Wheeler',
 259: 'Kenny Wheeler',
 260: 'Kenny Wheeler',
 261: 'Kid Ory',
 262: 'Kid Ory',
 263: 'Kid Ory',
 264: 'Kid Ory',
 265: 'Kid Ory',
 266: 'Lee Konitz',
 267: 'Lee Konitz',
 268: 'Lee Konitz',
 269: 'Lee Konitz',
 270: 'Lee Konitz',
 271: 'Lee Konitz',
 272: 'Lee Konitz',
 273: 'Lee Konitz',
 274: 'Lee Morgan',
 275: 'Lee Morgan',
 276: 'Lee Morgan',
 277: 'Lee Morgan',
 278: 'Lester Young',
 279: 'Lester Young',
 280: 'Lester Young',
 281: 'Lester Young',
 282: 'Lester Young',
 283: 'Lester Young',
 284: 'Lester Young',
 285: 'Lionel Hampton',
 286: 'Lionel Hampton',
 287: 'Lionel Hampton',
 288: 'Lionel Hampton',
 289: 'Lionel Hampton',
 290: 'Lionel Hampton',
 291: 'Louis Armstrong',
 292: 'Louis Armstrong',
 293: 'Louis Armstrong',
 294: 'Louis Armstrong',
 295: 'Louis Armstrong',
 296: 'Louis Armstrong',
 297: 'Louis Armstrong',
 298: 'Louis Armstrong',
 299: 'Michael Brecker',
 300: 'Michael Brecker',
 301: 'Michael Brecker',
 302: 'Michael Brecker',
 303: 'Michael Brecker',
 304: 'Michael Brecker',
 305: 'Michael Brecker',
 306: 'Michael Brecker',
 307: 'Michael Brecker',
 308: 'Michael Brecker',
 309: 'Miles Davis',
 310: 'Miles Davis',
 311: 'Miles Davis',
 312: 'Miles Davis',
 313: 'Miles Davis',
 314: 'Miles Davis',
 315: 'Miles Davis',
 316: 'Miles Davis',
 317: 'Miles Davis',
 318: 'Miles Davis',
 319: 'Miles Davis',
 320: 'Miles Davis',
 321: 'Miles Davis',
 322: 'Miles Davis',
 323: 'Miles Davis',
 324: 'Miles Davis',
 325: 'Miles Davis',
 326: 'Miles Davis',
 327: 'Miles Davis',
 328: 'Milt Jackson',
 329: 'Milt Jackson',
 330: 'Milt Jackson',
 331: 'Milt Jackson',
 332: 'Milt Jackson',
 333: 'Milt Jackson',
 334: 'Nat Adderley',
 335: 'Nat Adderley',
 336: 'Ornette Coleman',
 337: 'Ornette Coleman',
 338: 'Ornette Coleman',
 339: 'Ornette Coleman',
 340: 'Ornette Coleman',
 341: 'Pat Martino',
 342: 'Pat Metheny',
 343: 'Pat Metheny',
 344: 'Pat Metheny',
 345: 'Pat Metheny',
 346: 'Paul Desmond',
 347: 'Paul Desmond',
 348: 'Paul Desmond',
 349: 'Paul Desmond',
 350: 'Paul Desmond',
 351: 'Paul Desmond',
 352: 'Paul Desmond',
 353: 'Paul Desmond',
 354: 'Pepper Adams',
 355: 'Pepper Adams',
 356: 'Pepper Adams',
 357: 'Pepper Adams',
 358: 'Pepper Adams',
 359: 'Phil Woods',
 360: 'Phil Woods',
 361: 'Phil Woods',
 362: 'Phil Woods',
 363: 'Phil Woods',
 364: 'Phil Woods',
 365: 'Red Garland',
 366: 'Rex Stewart',
 367: 'Roy Eldridge',
 368: 'Roy Eldridge',
 369: 'Roy Eldridge',
 370: 'Roy Eldridge',
 371: 'Roy Eldridge',
 372: 'Roy Eldridge',
 373: 'Sidney Bechet',
 374: 'Sidney Bechet',
 375: 'Sidney Bechet',
 376: 'Sidney Bechet',
 377: 'Sidney Bechet',
 378: 'Sonny Rollins',
 379: 'Sonny Rollins',
 380: 'Sonny Rollins',
 381: 'Sonny Rollins',
 382: 'Sonny Rollins',
 383: 'Sonny Rollins',
 384: 'Sonny Rollins',
 385: 'Sonny Rollins',
 386: 'Sonny Rollins',
 387: 'Sonny Rollins',
 388: 'Sonny Rollins',
 389: 'Sonny Rollins',
 390: 'Sonny Rollins',
 391: 'Sonny Stitt',
 392: 'Sonny Stitt',
 393: 'Sonny Stitt',
 394: 'Sonny Stitt',
 395: 'Sonny Stitt',
 396: 'Sonny Stitt',
 397: 'Stan Getz',
 398: 'Stan Getz',
 399: 'Stan Getz',
 400: 'Stan Getz',
 401: 'Stan Getz',
 402: 'Stan Getz',
 403: 'Steve Coleman',
 404: 'Steve Coleman',
 405: 'Steve Coleman',
 406: 'Steve Coleman',
 407: 'Steve Coleman',
 408: 'Steve Coleman',
 409: 'Steve Coleman',
 410: 'Steve Coleman',
 411: 'Steve Coleman',
 412: 'Steve Coleman',
 413: 'Steve Lacy',
 414: 'Steve Lacy',
 415: 'Steve Lacy',
 416: 'Steve Lacy',
 417: 'Steve Lacy',
 418: 'Steve Lacy',
 419: 'Steve Turre',
 420: 'Steve Turre',
 421: 'Steve Turre',
 422: 'Von Freeman',
 423: 'Warne Marsh',
 424: 'Warne Marsh',
 425: 'Warne Marsh',
 426: 'Wayne Shorter',
 427: 'Wayne Shorter',
 428: 'Wayne Shorter',
 429: 'Wayne Shorter',
 430: 'Wayne Shorter',
 431: 'Wayne Shorter',
 432: 'Wayne Shorter',
 433: 'Wayne Shorter',
 434: 'Wayne Shorter',
 435: 'Wayne Shorter',
 436: 'Woody Shaw',
 437: 'Woody Shaw',
 438: 'Woody Shaw',
 439: 'Woody Shaw',
 440: 'Woody Shaw',
 441: 'Woody Shaw',
 442: 'Woody Shaw',
 443: 'Woody Shaw',
 444: 'Wynton Marsalis',
 445: 'Wynton Marsalis',
 446: 'Wynton Marsalis',
 447: 'Wynton Marsalis',
 448: 'Wynton Marsalis',
 449: 'Wynton Marsalis',
 450: 'Wynton Marsalis',
 451: 'Zoot Sims',
 452: 'Zoot Sims',
 453: 'Zoot Sims',
 454: 'Zoot Sims',
 455: 'Zoot Sims',
 456: 'Zoot Sims'\}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{performer}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{solos}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{melid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{map}\PYG{p}{(}\PYG{n}{mapper}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{o}{.}\PYG{n}{head}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}   eventid  melid      onset  pitch  duration  period  division  bar  beat  \textbackslash{}
0        1      1  10.343492   65.0  0.138776       4         1    0     1
1        2      1  10.637642   63.0  0.171247       4         4    0     2
2        3      1  10.843719   58.0  0.081270       4         4    0     2
3        4      1  10.948209   61.0  0.235102       4         1    0     3
4        5      1  11.232653   63.0  0.130612       4         1    0     4

   tatum  {\ldots}  loud\_max   loud\_med   loud\_sd loud\_relpos  loud\_cent  loud\_s2b  \textbackslash{}
0      1  {\ldots}  0.126209  66.526087  5.541147    0.307692   0.389466  1.056169
1      1  {\ldots}  0.349751  69.133321  2.912412    0.250000   0.468687  1.120317
2      4  {\ldots}  0.094051  66.352130  3.564563    0.428571   0.531354  1.310389
3      1  {\ldots}  0.521187  66.484173  2.414298    0.818182   0.559333  0.984047
4      1  {\ldots}  0.560737  71.699054  2.185794    0.166667   0.438973  1.061262

    f0\_range  f0\_freq\_hz  f0\_med\_dev   performer
0  37.794261   12.932532   -0.328442  Art Pepper
1   6.365930    6.956935   11.135423  Art Pepper
2  68.010392         NaN   32.366787  Art Pepper
3  15.443906    5.867151   -3.374696  Art Pepper
4  11.444363    8.329975    6.377737  Art Pepper

[5 rows x 27 columns]
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{o}{.}\PYG{n}{tail}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}        eventid  melid      onset  pitch  duration  period  division  bar  \textbackslash{}
200804   200805    456  63.135057   57.0  0.168345       4         2   53
200805   200806    456  63.303401   55.0  0.087075       4         3   54
200806   200807    456  63.390476   57.0  0.191565       4         3   54
200807   200808    456  63.640091   59.0  0.406349       4         1   54
200808   200809    456  64.058050   52.0  1.433832       4         2   54

        beat  tatum  {\ldots}  loud\_max   loud\_med   loud\_sd loud\_relpos  \textbackslash{}
200804     4      2  {\ldots}  1.113380  72.169552  6.896394    0.687500
200805     1      1  {\ldots}  0.491496  69.732265  1.814723    0.500000
200806     1      2  {\ldots}  1.187058  76.628621  2.628726    0.411765
200807     2      1  {\ldots}  0.972676  66.042058  3.690577    0.000000
200808     3      2  {\ldots}  0.368321  58.174931  9.418678    0.053030

        loud\_cent  loud\_s2b    f0\_range  f0\_freq\_hz  f0\_med\_dev  performer
200804   0.581956  1.271747  191.074095   10.966972  -11.891698  Zoot Sims
200805   0.595212  1.339060   40.375449         NaN  -99.173779  Zoot Sims
200806   0.590950  1.432802  104.823845   11.148561   -2.911604  Zoot Sims
200807   0.334937  1.082549  165.810976    2.659723   14.311001  Zoot Sims
200808   0.400571  1.278890   66.932198    2.153916   -9.381310  Zoot Sims

[5 rows x 27 columns]
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{data} \PYG{o}{=} \PYG{n}{solos}\PYG{p}{[}\PYG{n}{solos}\PYG{o}{.}\PYG{n}{pitch}\PYG{o}{.}\PYG{n}{notnull}\PYG{p}{(}\PYG{p}{)} \PYG{o}{\PYGZam{}} \PYG{n}{solos}\PYG{o}{.}\PYG{n}{loud\PYGZus{}med}\PYG{o}{.}\PYG{n}{notnull}\PYG{p}{(}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

A description of what these columns contain is stated on the website: \sphinxurl{https://jazzomat.hfm-weimar.de/dbformat/dbformat.html}

We can now check how many solos the database contains.

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{grouped\PYGZus{}df} \PYG{o}{=} \PYG{n}{solos}\PYG{o}{.}\PYG{n}{groupby}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{performer}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[41]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{selected} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Charlie Parker}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Miles Davis}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Louis Armstrong}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Herbie Hancock}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Von Freeman}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Red Garland}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}

\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{)}

\PYG{k}{for} \PYG{n}{performer}\PYG{p}{,} \PYG{n}{df} \PYG{o+ow}{in} \PYG{n}{grouped\PYGZus{}df}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{performer} \PYG{o+ow}{in} \PYG{n}{selected}\PYG{p}{:}
        \PYG{n}{sns}\PYG{o}{.}\PYG{n}{regplot}\PYG{p}{(}
            \PYG{n}{data}\PYG{o}{=}\PYG{n}{df}\PYG{p}{,}
            \PYG{n}{x}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
            \PYG{n}{y}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{loud\PYGZus{}med}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
            \PYG{n}{x\PYGZus{}jitter}\PYG{o}{=}\PYG{o}{.}\PYG{l+m+mi}{1}\PYG{p}{,}
            \PYG{n}{y\PYGZus{}jitter}\PYG{o}{=}\PYG{o}{.}\PYG{l+m+mi}{1}\PYG{p}{,}
            \PYG{n}{scatter\PYGZus{}kws}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{alpha}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{o}{.}\PYG{l+m+mi}{01}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{color}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grey}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
            \PYG{n}{line\PYGZus{}kws}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{lw}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{2}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
            \PYG{n}{label}\PYG{o}{=}\PYG{n}{performer}\PYG{p}{,}
            \PYG{n}{scatter}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,}
            \PYG{n}{ax}\PYG{o}{=}\PYG{n}{ax}
        \PYG{p}{)}

\PYG{n}{plt}\PYG{o}{.}\PYG{n}{xlabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MIDI Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{ylabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Median loudness [dB]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{legend}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=625\sphinxpxdimen,height=607\sphinxpxdimen]{{04_jazz_solos_25_0}.png}

\end{nbsphinxfancyoutput}

\sphinxstylestrong{Observations:}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Most performers increase loudness with increasing pitch.

\item {} 
Charlie Parker (sax) and Louis Armstrong (t) show very similar patterns but Armstrong is generally higher.

\item {} 
Miles Davis (t) is similar to the two but plays generally softer than both.

\item {} 
Von Freeman (sax) strongly and Herbie Hancock (p) weakly decrease loudness with increasing pitch (almost all other performers show positive correlations).

\item {} 
Red Garland (p) plays generally lower than Herbie Hancock (p) but does show a positive correlation between pitch and loudness (NB: there is only one solo in the database).

\end{enumerate}

Does this tell us something about performer styles or about instruments?


\section{The “rain cloud” of Jazz solos}
\label{\detokenize{04_jazz_solos:The-_u201crain-cloud_u201d-of-Jazz-solos}}
{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[34]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{X} \PYG{o}{=} \PYG{n}{data}\PYG{p}{[}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{loud\PYGZus{}med}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{]}\PYG{o}{.}\PYG{n}{values}
\PYG{n}{x} \PYG{o}{=} \PYG{n}{X}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{n}{y} \PYG{o}{=} \PYG{n}{X}\PYG{p}{[}\PYG{p}{:}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{]}

\PYG{n}{fig}\PYG{p}{,} \PYG{n}{ax} \PYG{o}{=} \PYG{n}{plt}\PYG{o}{.}\PYG{n}{subplots}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{6}\PYG{p}{,}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{ax}\PYG{o}{.}\PYG{n}{scatter}\PYG{p}{(}\PYG{n}{x}\PYG{p}{,}\PYG{n}{y}\PYG{p}{,} \PYG{n}{alpha}\PYG{o}{=}\PYG{l+m+mf}{0.01}\PYG{p}{)}

\PYG{n}{plt}\PYG{o}{.}\PYG{n}{xlabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{ylabel}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Median loudness [dB]}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{plt}\PYG{o}{.}\PYG{n}{show}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=425\sphinxpxdimen,height=281\sphinxpxdimen]{{04_jazz_solos_28_0}.png}

\end{nbsphinxfancyoutput}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[74]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{melid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{max}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[74]:\,\hspace{\fboxrule}\hspace{\fboxsep}}456
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[75]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{solos}\PYG{p}{[} \PYG{n}{solos}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{melid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{2} \PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{loud\PYGZus{}med}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{plot}\PYG{p}{(}\PYG{n}{figsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=1158\sphinxpxdimen,height=194\sphinxpxdimen]{{04_jazz_solos_30_0}.png}

\end{nbsphinxfancyoutput}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[114]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{seaborn} \PYG{k}{as} \PYG{n+nn}{sns}
\PYG{k+kn}{import} \PYG{n+nn}{matplotlib}\PYG{n+nn}{.}\PYG{n+nn}{pyplot} \PYG{k}{as} \PYG{n+nn}{plt}
\PYG{k+kn}{import} \PYG{n+nn}{numpy} \PYG{k}{as} \PYG{n+nn}{np}
\end{sphinxVerbatim}
}

{
\sphinxsetup{VerbatimColor={named}{nbsphinx-code-bg}}
\sphinxsetup{VerbatimBorderColor={named}{nbsphinx-code-border}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[135]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} fig, axes = plt.subplots(5,1, figsize=(15,20))}

\PYG{c+c1}{\PYGZsh{} for idx, rand in enumerate(np.random.randint(1,solos[\PYGZdq{}melid\PYGZdq{}].unique().max(), 5)):}
\PYG{n}{sns}\PYG{o}{.}\PYG{n}{lmplot}\PYG{p}{(}\PYG{n}{data}\PYG{o}{=}\PYG{n}{solos}\PYG{p}{[} \PYG{n}{solos}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{melid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{==} \PYG{l+m+mi}{130} \PYG{p}{]}\PYG{p}{,} \PYG{n}{x}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pitch}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{y}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{loud\PYGZus{}med}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}
}

\hrule height -\fboxrule\relax
\vspace{\nbsphinxcodecellspacing}

\makeatletter\setbox\nbsphinxpromptbox\box\voidb@x\makeatother

\begin{nbsphinxfancyoutput}

\noindent\sphinxincludegraphics[width=352\sphinxpxdimen,height=352\sphinxpxdimen]{{04_jazz_solos_32_0}.png}

\end{nbsphinxfancyoutput}



\renewcommand{\indexname}{Index}
\printindex
\end{document}